@model Homer_MVC.ViewModels.medios.ViewModeloMediosConstante
@{
    ViewBag.Title = "Medios Magneticos";
    ViewBag.Icono = "fa fa-share";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    @Styles.Render("~/bundles/select2/css")
    <link href="~/Vendor/BootstrapMultiselect/multiselect.css" rel="stylesheet" />
    <link href="~/Vendor/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="~/Vendor/sweetalert/lib/sweet-alert.css" rel="stylesheet" />
    <link href="~/Vendor/bootstrap-toggle-master/css/bootstrap-toggle.min.css" rel="stylesheet" />
}

@* Barra de Informacion General de la Pantalla *@
<div class="panel-body">
    <div class="panel-heading" style="background-color:white;  border:solid 1px; border-color:#e4e5e7">
        <div class="panel-body">

            <div id="hbreadcrumb" class="pull-right">

                <button type="button" class="btn btn-mini btn-default" style="border-radius:25px" data-container="body" data-toggle="popover" data-placement="left" data-title="Enlaces" data-content="<ul>@ViewBag.nombreEnlaces</ul>" data-html="true">
                    <i class="text-info fa fa-tags"></i>
                </button>
                <button type="button" class="btn btn-mini btn-default" style="border-radius:25px" data-container="body" data-toggle="popover" data-placement="left" data-title="Documentos" data-content="<ul></i><a href=''>Documento 1</a></ul>  <ul></i><a href=''>Documento 2</a></ul> <ul></i><a href=''>Documento 3</a></ul>" data-html="true">
                    <i class="text-primary fa fa-files-o"></i>
                </button>
                <button type="button" class="btn btn-mini btn-default" style="border-radius:25px" data-container="body" data-toggle="popover" data-placement="left" data-title="Favoritos" data-content="@ViewBag.Favoritos" data-html="true">
                    <i class="text-warning fa fa-star"></i>
                </button>

            </div>
            <h3 class="font-light m-b-xs">
                <i class="text-info @ViewBag.Icono"></i>&nbsp;&nbsp;@ViewBag.Title
            </h3>
            <small>Generar @ViewBag.Title</small>
        </div>
    </div>
</div>

<div class="panel-body" style="padding-top:0px;">

    @* @using (Html.BeginForm("AgregarConstantes", "medmagconstantes", FormMethod.Post, new { @name = "btnAgregarDefCons", @id = "btnAgregarDefCons" })) *@
    @*@using (Html.BeginForm())
        {*@
    <div class="hpanel">
        @if (TempData["mensaje_correcto"] != null)
        {
            <div class="alert alert-success  alert-dismissible">
                <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                <p>@TempData["mensaje_correcto"]</p>
            </div>
        }
        @if (TempData["mensaje_error"] != null)
        {
            <div class="alert alert-danger  alert-dismissible">
                <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                <p>@TempData["mensaje_error"]</p>
            </div>
        }
        <div id="tabs" class="tab-content">
            <div class="m float-e-margins text-right">
                <div class="tooltip-demo">
                    <div id="div-mensaje"></div>
                </div>
            </div>

            <ul id="tabs-crear" class="nav nav-tabs">
                @*
                    <li class="active" onclick="MostrarTodasDefiniconesConstantes();"><a data-toggle="tab" href="#definicion"><i class="@ViewBag.Icono"></i>&nbsp;&nbsp;@ViewBag.Title</a></li>*@
                <li class="active" onclick=""><a data-toggle="tab" href="#definicion"><i class="@ViewBag.Icono"></i>&nbsp;&nbsp;@ViewBag.Title</a></li>
                <li class="" onclick=""><a data-toggle="tab" href="#generador"><i class="fa fa-sellsy"></i>&nbsp;&nbsp;Generador de Archivo de Medios Magneticos</a></li>
            </ul>
            @* Definicion Panel principal *@
            <div id="definicion" class="tab-pane active">
                <div class="panel-body">
                    <div class="panel-heading" style="background-color:white">
                        <h4><label class="control-label col-md-2">Año :&nbsp;<span class="text-danger">*</span></label></h4>
                        @* Campo Año *@
                        @*<div class="col-md-2">
                                <input type="number" minlength="4" maxlength="4" class="form-control" id="anio" value="" required="required" placeholder="Digite Año" onkeypress="return soloNumeros(event)" />
                            </div>*@
                        @* Campo Año *@
                        <div class="col-md-2">
                            <div class="col-sm-4"><label class="control-label">Año:&nbsp;</label></div>

                            <div class="col-sm-8">
                                <div class="input-append date" id="anio" data-date="10-2018" data-date-format="mm-yyyy">
                                    <input type="text" class="form-control" readonly="readonly" name="anio" size="4">
                                    <span class="add-on"><i class="icon-th"></i></span>
                                </div>
                            </div>
                        </div>


                        <div class="col-md-pull-6">
                            <button class="btn btn-info" type="button" id="btnCopiarConf"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;Copiar Definiciones</button>
                        </div>

                    </div>
                </div>

                <div class="panel-body">
                    <div class="hpanel">
                        <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                            <div class="panel-tools">
                                <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                            </div>
                            <i class="fa fa-volume-control-phone"></i>&nbsp;&nbsp;&nbsp;Definición
                        </div>
                        <div class="panel-body">
                            @* captura de formato y concepto *@
                            <div class="row">

                                @*<h4><label class="control-label col-md-2">Formato :&nbsp;<span class="text-danger">*</span></label></h4>*@
                                @* Campo Formato *@
                                @*<div class="col-md-2">
                                        <input type="text" class="form-control" id="formato" value="" required="required" placeholder="Digite Formato" onkeypress="return soloNumeros(event)" />
                                    </div>*@

                                @* Campo Formato *@
                                <label class="control-label col-md-2">Formato:&nbsp;</label>
                                <div class="col-md-2">
                                    <select class="form-control js-source-states" id="formato" name="formato" placeholder="Seleccione">
                                        <option value="">Seleccione</option>
                                    </select>
                                </div>
                                @* Campo Concepto *@
                                <label class="control-label col-md-2">Concepto:&nbsp;</label>
                                <div class="col-md-2">
                                    <select class="form-control js-source-states" id="concepto" name="concepto" placeholder="Seleccione">
                                        <option value="">Seleccione</option>
                                    </select>
                                </div>

                                @*<h4><label class="control-label col-md-2">Concepto :&nbsp;<span class="text-danger">*</span></label></h4>*@
                                @* Campo Concepto *@
                                @*<div class="col-md-2">
                                        <input type="text" class="form-control" id="concepto" value="" required="required" placeholder="Digite Concepto" onkeypress="return soloNumeros(event)" />
                                    </div>*@

                            </div>
                            @*  Panel Definicion de Valores Constantes  *@
                            <div id="panelDefinicionConstantes">
                                <div class="hpanel">
                                    <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                                        <div class="panel-tools">
                                            <a class="showhide"><i class="fa fa-chevron-down"></i></a>
                                        </div>
                                        <i class="fa fa-credit-card-alt"></i>&nbsp;&nbsp;Definici&oacute;n de Valores Constantes
                                    </div>
                                    <div class="panel-body" id="constantes">
                                        <div id="buscar" class="tab-pane">
                                            <div class="panel-body-busqueda">
                                                <div class="table-responsive">
                                                    <div id="div-mensaje-buscar"></div>
                                                    @*  Tabla de Valores Constantes  *@
                                                    <table class="table table-striped table-bordered table-hover tablaDetallesDefinicionesValoresConstantes" id="tablaDetallesDefinicionesValoresConstantes">
                                                        <thead>
                                                            <tr>
                                                                <th style="text-align:center">Año</th>
                                                                <th style="text-align:center">Formato</th>
                                                                <th style="text-align:center">Concepto</th>
                                                                <th style="text-align:center">Nit</th>
                                                                <th style="text-align:center">Val1</th>
                                                                <th style="text-align:center">Val2</th>
                                                                <th style="text-align:center">Val3</th>
                                                                <th style="text-align:center">Val4</th>
                                                                <th style="text-align:center">Val5</th>
                                                                <th style="text-align:center">Val6</th>
                                                                <th style="text-align:center">Val7</th>
                                                                <th style="text-align:center">Val8</th>
                                                                <th style="text-align:center">Val9</th>
                                                                <th style="text-align:center">Val10</th>
                                                                <th style="text-align:center">Val11</th>
                                                                <th style="text-align:center">Acci&oacute;n</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                                <div class="panel-body-btns text-right">
                                                    <button class="btn btn-info" type="button" id="btnAgregarDefCons"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;Agregar</button>
                                                    @*<button type="submit" class="btn btn-info" name="submitAgregarDefCons" id="submitAgregarDefCons"><font><font>Agregar Constantes</font></font></button>*@
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*  Panel Definicion de Valores Dase de Datos  *@
                            <div id="panelDefinicionSobreBaseDatos">
                                <div class="hpanel">
                                    <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                                        <div class="panel-tools">
                                            <a class="showhide"><i class="fa fa-chevron-down"></i></a>
                                        </div>
                                        <i class="fa fa-credit-card-alt"></i>&nbsp;&nbsp;Definición sobre la Base de Datos
                                    </div>
                                    <div class="panel-body" id="valoresbasedatos">
                                        <div id="buscar" class="tab-pane">
                                            <div class="panel-body-busqueda">
                                                <div class="table-responsive">
                                                    <div id="div-mensaje-buscar"></div>
                                                    @*  Tabla de Valores Dase de Datos  *@
                                                    <table class="table table-striped table-bordered table-hover tablaDetallesDefinicionesSobreBaseDatos" id="tablaDetallesDefinicionesSobreBaseDatos">
                                                        <thead>
                                                            <tr>
                                                                <th style="text-align:center">Año</th>
                                                                <th style="text-align:center">Formato</th>
                                                                <th style="text-align:center">Concepto</th>
                                                                <th style="text-align:center">Val1</th>
                                                                <th style="text-align:center">Val2</th>
                                                                <th style="text-align:center">Val3</th>
                                                                <th style="text-align:center">Val4</th>
                                                                <th style="text-align:center">Val5</th>
                                                                <th style="text-align:center">Val6</th>
                                                                <th style="text-align:center">Val7</th>
                                                                <th style="text-align:center">Val8</th>
                                                                <th style="text-align:center">Val9</th>
                                                                <th style="text-align:center">Val10</th>
                                                                <th style="text-align:center">Val11</th>
                                                                <th style="text-align:center">Acci&oacute;n</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                                <div class="panel-body-btns text-right">
                                                    <button class="btn btn-info" type="button" id="btnAgregarDB"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;Agregar Cabecera</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            @* ***************   Medios Magneticos ******************** *@
            <div id="generador" class="tab-pane">
                <div class="panel-body">
                    <div class="panel-heading" style="background-color:white">
                        <h4><label class="control-label col-md-2">Año :&nbsp;<span class="text-danger">*</span></label></h4>
                        @* Campo Año *@
                        <div class="col-md-2">
                            @*  <input type="number" onblur="annio2()" minlength="4" maxlength="4" oninput="if(this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" class="form-control" id="rannio" value="" required="required" placeholder="Digite Año" onkeypress="return soloNumeros(event)" /> *@
                            <input type="number" onblur="annio2()" minlength="4" maxlength="4" class="form-control" id="rannio" value="" required="required" placeholder="Digite Año" onkeypress="return soloNumeros(event)" />

                            @*<div class="input-append date" id="fechajm" data-date="22-2018"
                                       data-date-format="mm-yyyy">
                                    <input type="text" readonly="readonly" name="date">
                                    <span class="add-on"><i class="icon-th"></i></span>
                                </div>*@

                        </div>
                    </div>
                </div>

                <div class="panel-body">
                    <div class="hpanel">
                        <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                            <div class="panel-tools">
                                <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                            </div>
                            <i class="fa fa-volume-control-phone"></i>&nbsp;&nbsp;&nbsp;Generador de Archivos Magneticos
                        </div>
                        <div class="panel-body">
                            @* captura de formato y concepto *@
                            <div class="row">
                                @* Campo Formato *@
                                <label class="control-label col-md-2">Formato:&nbsp;</label>
                                <div class="col-md-2">
                                    <select class="form-control js-source-states" id="rformato" name="rformato" placeholder="Seleccione">
                                        <option value="">Seleccione</option>
                                    </select>
                                </div>
                                @* Campo Concepto *@
                                <label class="control-label col-md-2">Concepto:&nbsp;</label>
                                <div class="col-md-2">
                                    <select class="multiselect-ui form-control" id="rconcepto" name="rconcepto" multiple="multiple" required="required">
                                        <option></option>
                                    </select>
                                </div>

                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-4">Tope Activo :&nbsp;</label>
                                        <div class="col-md-6">
                                            @*<input type="checkbox" name="estado" value="1" checked><br>*@
                                            @Html.CheckBoxFor(model => model.sitope, new { @checked = "checked", @data_toggle = "toggle", @data_size = "mini", @data_on = "Si", @data_off = "No", @id = "toprmm", @name = "toprmm" })
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-pull-12">
                                    <button class="btn btn-info" type="button" id="btnAgregarRegGenerados"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;Agregar</button>
                                </div>
                                @*<button type="submit" class="btn btn-info" name="submitAgregarDefCons" id="submitAgregarDefCons"><font><font>Agregar Constantes</font></font></button>*@
                            </div>
                            @*  Panel Registros Medios Magneticos *@
                            <div id="panelRegistrosGenerados">
                                <div class="hpanel">
                                    <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                                        <div class="panel-tools">
                                            <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                                        </div>
                                        <i class="fa fa-credit-card-alt"></i>&nbsp;&nbsp;Archivos Medios Magneticos Generados
                                    </div>
                                    <div class="panel-body" id="regenerados">
                                        <div id="buscar" class="tab-pane">
                                            <div class="panel-body-busqueda">
                                                <div class="table-responsive">
                                                    <div id="div-mensaje-buscar"></div>
                                                    @*  Tabla de Registros Medios Magneticos  *@
                                                    <table class="table table-striped table-bordered table-hover tablaDetallesRegistrosGenerados" id="tablaDetallesRegistrosGenerados">
                                                        <thead>
                                                            <tr>
                                                                <th style="text-align:center">Año</th>
                                                                <th style="text-align:center">Formato</th>
                                                                <th style="text-align:center">Concepto</th>
                                                                <th style="text-align:center">Nit</th>
                                                                <th style="text-align:center">Val1</th>
                                                                <th style="text-align:center">Val2</th>
                                                                <th style="text-align:center">Val3</th>
                                                                <th style="text-align:center">Val4</th>
                                                                <th style="text-align:center">Val5</th>
                                                                <th style="text-align:center">Val6</th>
                                                                <th style="text-align:center">Val7</th>
                                                                <th style="text-align:center">Val8</th>
                                                                <th style="text-align:center">Val9</th>
                                                                <th style="text-align:center">Val10</th>
                                                                <th style="text-align:center">Val11</th>
                                                                @*
                                                                    <th style="text-align:center">Acci&oacute;n</th>*@
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>

                                                @* gdfgdsgdsgdsgfdfgdg *@
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>

                            @*  Panel Registros Medios Magneticos Excel *@
                            <div id="panelGenerarExcel">
                                <div class="hpanel">
                                    <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                                        <div class="panel-tools">
                                            <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                                        </div>
                                        <i class="fa fa-credit-card-alt"></i>&nbsp;&nbsp;Generar Excel de Medios Magneticos
                                    </div>
                                    @* tabla de excel *@
                                    <div class="panel-body" id="excelmedios">
                                        <div class="row">
                                            <label class="control-label col-md-2">&nbsp;</label>
                                        </div>
                                        <div class="row">
                                            @*inicio segundo row*@

                                            @* Campo Año *@
                                            <div class="col-md-3">
                                                <div class="col-sm-4"><label class="control-label">Año:&nbsp;</label></div>

                                                <div class="col-sm-8">
                                                    <div class="input-append date" id="excelanio" data-date="10-2018" data-date-format="mm-yyyy">
                                                        <input type="text" class="form-control" readonly="readonly" name="date" size="4">
                                                        <span class="add-on"><i class="icon-th"></i></span>
                                                    </div>
                                                </div>
                                            </div>


                                            @* Campo Formato *@
                                            <div class="col-md-3">
                                                <div class="col-sm-4">
                                                    <label class="control-label">Formato:&nbsp;</label>
                                                </div>
                                                <div class="col-md-8">
                                                    @*<select class="multiselect-ui form-control" id="excelformato" name="excelformato" multiple="multiple" required="required" size="8">
                                                            <option></option>
                                                        </select>*@

                                                    <select class="form-control js-source-states" id="excelformato" name="excelformato" placeholder="Seleccione">
                                                        <option value="">Seleccione</option>
                                                    </select>
                                                </div>
                                            </div>


                                            @* Campo Concepto *@
                                            <div class="col-md-3">
                                                <div class="col-sm-4">
                                                    <label class="control-label">Concepto:&nbsp;</label>
                                                </div>
                                                <div class="col-md-8">
                                                    <select class="multiselect-ui form-control" id="excelconcepto" name="excelconcepto" multiple="multiple" required="required" size="8">
                                                        <option></option>
                                                    </select>
                                                </div>
                                            </div>


                                            <div class="col-md-2 text-right">
                                                <button class="btn btn-info" type="button" id="btnExcel"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;Generar Excel</button>
                                            </div>

                                        </div>
                                        <br />
                                        <div id="buscar" class="tab-pane">
                                            <div class="panel-body-busqueda">
                                                <div class="table-responsive">
                                                    <div id="div-mensaje-buscar"></div>
                                                    @*  Tabla de Valores para Excel  *@
                                                    <table class="table table-striped table-bordered table-hover tablaDetallesparaexcel" id="tablaDetallesparaexcel">
                                                        <thead>
                                                            <tr>
                                                                <th style="text-align:center">Año</th>
                                                                <th style="text-align:center">Formato</th>
                                                                <th style="text-align:center">Concepto</th>
                                                                <th style="text-align:center">Nit</th>
                                                                <th style="text-align:center">Val1</th>
                                                                <th style="text-align:center">Val2</th>
                                                                <th style="text-align:center">Val3</th>
                                                                <th style="text-align:center">Val4</th>
                                                                <th style="text-align:center">Val5</th>
                                                                <th style="text-align:center">Val6</th>
                                                                <th style="text-align:center">Val7</th>
                                                                <th style="text-align:center">Val8</th>
                                                                <th style="text-align:center">Val9</th>
                                                                <th style="text-align:center">Val10</th>
                                                                <th style="text-align:center">Val11</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>   @*bfghfdh*@

                                </div>


                            </div>
                        </div>
                        @* mosca no pasar de aqui *@

                    </div>
                </div>
            </div>
        </div>

        @* dfgsdfgs *@

    </div>
</div>
@*}*@
</div>


@* ******     Modal Definicion de Valores Constante ********   *@
<div class="modal fade hmodal-info" id="modalDefinicionValoresconstantes" tabindex="-1" role="dialog" aria-hidden="true">

    @using (Html.BeginForm("AgregarConstantes", "medmagconstantes", FormMethod.Post, new { @name = "defconstantes", @id = "defconstantes" }))
    {
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="color-line"></div>
            <div class="modal-header text-center">
                <h4 class="modal-title">Definic&oacute;n de Valores Constantes</h4>
                <small>Agregar Definici&oacute;n de Valores Constantes</small>
            </div>

            <div class="modal-body">
                @* mensajes *@
                <div class="alert alert-success  alert-dismissible" style="display: none" id="mensaje">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje"></p>
                </div>

                <div class="alert alert-danger  alert-dismissible" style="display: none" id="mensaje_error">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje_error"></p>
                </div>

                <div class="alert alert-success alert-dismissible" style="display: none" id="mensaje_enviando">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje_enviando"></p>
                </div>


                @*Ejemplo de un Hiden <input type="hidden" id="idVehiculoCotizado" />*@
                @* DropDownList de terceros NIT *@

                <div class="col-sm-12">
                    <div class="form-group">
                        @Html.LabelFor(model => model.Viewterceros.tercero_id, "Nit", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-8">
                            @Html.DropDownList("tercero_id", null, "Seleccione", htmlAttributes: new { @class = "form-control js-source-states", @placeholder = "Seleccione", @required = "required" })
                            @Html.ValidationMessageFor(model => model.Viewterceros.tercero_id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                @* Valor 1 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 1:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor1" placeholder="Digite Valor 1" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 2 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 2:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor2" placeholder="Digite Valor 2" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 3 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 3:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor3" placeholder="Digite Valor 3" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 4 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 4:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor4" placeholder="Digite Valor 4" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 5 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 5:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor5" placeholder="Digite Valor 5" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 6 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 6:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor6" placeholder="Digite Valor 6" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 7 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 7:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor7" placeholder="Digite Valor 7" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 8 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 8:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor8" placeholder="Digite Valor 8" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 9 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 9:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor9" placeholder="Digite Valor 9" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 10 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 10:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor10" placeholder="Digite Valor 10" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Valor 11 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 11:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtValor11" placeholder="Digite Valor 11" onkeypress="return soloNumeros(event)" onkeyUp="return miles(this.id)" />
                        </div>
                    </div>
                </div>
                @* Descripcion u Observacion*@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Descripci&oacute;n:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtdescripcion" placeholder="Digite Descripcion" />
                        </div>
                    </div>
                </div>
                @* Mensajes Alertas  *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <div class="row" style="display:none" id="alertAgregarConstantes">
                            <div class="alert alert-info">
                                <strong>Informaci&oacute;n!&nbsp;&nbsp;<p id="mensajeAgregarConstantes"></p></strong>
                            </div>
                        </div>
                    </div>
                </div>

                <label></label>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" id="btnGuardarConstantes">Guardar</button>*@
                <button type="submit" class="btn btn-info" name="submitmediosconv" id="submitmediosconv"><font><font>Guardar cambios</font></font></button>
            </div>
        </div>
    </div>


    }
</div>

@* ******     Modal Definicion de Valores BD YA NO  SE UTILIZA ********   *@
<div class="modal fade hmodal-info" id="modalDefinicionValoresDB" tabindex="-1" role="dialog" aria-hidden="true">

    @using (Html.BeginForm("AgregardefDB", "medmagconstantes", FormMethod.Post, new { @name = "defDB", @id = "defDB" }))

    {
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="color-line"></div>
            <div class="modal-header text-center">
                <h4 class="modal-title">Definici&oacute;n de Valores de la Base de Datos</h4>
                <small>Agregar Definici&oacute;n de Valores de la Base de Datos</small>
            </div>

            <div class="modal-body">
                @* mensajes *@
                <div class="alert alert-success  alert-dismissible" style="display: none" id="mensaje">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje"></p>
                </div>

                <div class="alert alert-danger  alert-dismissible" style="display: none" id="mensaje_error">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje_error"></p>
                </div>

                <div class="alert alert-success alert-dismissible" style="display: none" id="mensaje_enviando">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje_enviando"></p>
                </div>

                @* Valor 1 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 1:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            @*<select name="OptValor1">
                            *@
                            <select id="OptValor1" name="OptValor1" onChange="SeleccionarModalDB(this.value);">
                                <option value="1" selected>No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 2 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 2:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor2" name="OptValor2" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 3 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 3:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor3" name="OptValor3" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 4 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 4:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor4" name="OptValor4" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 5 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 5:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor5" name="OptValor5" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 6 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 6:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor6" name="OptValor6" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 7 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 7:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor7" name="OptValor7" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 8 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 8:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor8" name="OptValor8" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 9 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 9:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            @*<input type="text" class="form-control" id="txtValor9" placeholder="Digite Valor 9" onkeypress="return soloNumeros(event)" />*@
                            <select id="OptValor9" name="OptValor9" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 10 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 10:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor10" name="OptValor10" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>
                @* Valor 11 *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label col-md-4">Valor 11:&nbsp;<span class="text-danger"></span></label>
                        <div class="col-md-8">
                            <select id="OptValor11" name="OptValor11" onChange="SeleccionarModalDB(this.value);">
                                <option value="1">No = Valor 0</option>
                                <option value="2">M - Movimientos Cuentas</option>
                                <option value="3">D - Documentos</option>
                            </select>
                        </div>
                    </div>
                </div>

                @* Mensajes Alertas  *@
                <div class="col-sm-12">
                    <div class="form-group">
                        <div class="row" style="display:none" id="alertAgregarDB">
                            <div class="alert alert-info">
                                <strong>Informaci&oacute;n!&nbsp;&nbsp;<p id="mensajeAgregarDB"></p></strong>
                            </div>
                        </div>
                    </div>
                </div>
                <input type="text" id="Vauno" name="Vauno" value="" />
                <label></label>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" id="btnGuardarConstantes">Guardar</button>*@
                <button type="submit" class="btn btn-info" name="submitmediosdb" id="submitmediosdb"><font><font>Guardar cambios</font></font></button>
            </div>
        </div>
    </div>
    }
</div>

@* ******     Modal Observacion Constante ********   *@
<div class="modal fade hmodal-info" id="modalObservacion" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="color-line"></div>
            <div class="modal-header text-center">
                <h4 class="modal-title">Variable</h4>
                <small>Observaci&oacute;n de Variable</small>
            </div>
            <div class="modal-body">
                <input type="hidden" id="idObservacion" />
                <label class="control-label col-md-4">Observaci&oacute;n:<span class="text-danger"></span></label>
                <div class="col-sm-12">
                    <div class="form-group">
                        <div class="col-md-8">
                            <input type="text" class="form-control" id="txtObser" value="" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" id="btnGuardarVehiculo">Guardar</button>*@
            </div>
        </div>
    </div>
</div>

@*******     Modal Definicion de Movimientos y Cuentas *********@
<div class="modal fade hmodal-success in" id="modalDefinicionMoviminetoCuentas" tabindex="-1" role="dialog" aria-hidden="true">
    @using (Html.BeginForm("AgregarDefMovCtaBD", "medmagconstantes", FormMethod.Post, new { @name = "defMovCtaBD", @id = "defMovCtaBD" }))
    {
    @*@using (Html.BeginForm())*@
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="color-line"></div>
            <div class="modal-header">
                <h4 class="modal-title">Definici&oacute;n de Movimientos y Cuentas </h4>
                <small class="font-bold">Defina la siguiente información correspondiente a los Movimientos y a las Cuentas</small>
            </div>

            @*@using (Html.BeginForm("DevolverFacturaManual", "devolucionVentaAutomatica", FormMethod.Post, new { enctype = "multipart/form-data", @target = "_blank" }))
                {*@
            @Html.AntiForgeryToken()

            <div class="modal-body">

                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <input type="hidden" name="id_encabezado" id="id_encabezado" value="" />
                <input type="hidden" name="id_val" id="id_val" value="" />
                <input type="hidden" name="id_OptionTipMov" id="id_OptionTipMov" value="" />

                @* mensajes *@
                <div class="alert alert-success  alert-dismissible" style="display: none" id="mensaje">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje"></p>
                </div>

                <div class="alert alert-danger  alert-dismissible" style="display: none" id="mensaje_error">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje_error"></p>
                </div>

                <div class="alert alert-success alert-dismissible" style="display: none" id="mensaje_enviando">
                    <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                    <p id="cuerpo_mensaje_enviando"></p>
                </div>

                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label col-md-2">Cuenta:&nbsp;<span class="text-danger">*</span></label>
                        <div class="col-md-10">
                            @Html.DropDownList("cntpuc_id", null, "Seleccione", htmlAttributes: new { @class = "form-control js-source-states", @placeholder = "Seleccione", @required = "required" })
                            @Html.ValidationMessageFor(model => model.Viewcuenta_puc.cntpuc_id, "", new { @class = "text-danger" })
                        </div>

                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label col-md-5">Tipo (Opcional):<span class="text-danger"></span></label>
                        <div class="col-md-7">
                            @Html.DropDownList("tpdoc_id", null, "Seleccione", htmlAttributes: new { @class = "form-control js-source-states", @placeholder = "Seleccione" })
                            @Html.ValidationMessageFor(model => model.Viewtp_doc_registros.tpdoc_id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>

                <div class="col-sm-6">
                    <div class="form-group">
                        <fieldset>
                            <legend></legend>
                            <label>
                                <input type="radio" name="tip" value="1" required> Debito
                            </label>
                            <label>
                                <input type="radio" name="tip" value="2" required> Credito
                            </label>
                            <label>
                                <input type="radio" name="tip" value="3" required> Saldo
                            </label>
                            <label>
                                <input type="radio" name="tip" value="4" required> Base
                            </label>
                        </fieldset>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="control-label col-md-6">Operaci&oacute;n:&nbsp;<span class="text-danger">*</span></label>
                        <select id="OptValorOper" name="OptValorOper" required>
                            <option value="+"> Suma </option>
                            <option value="-"> Resta </option>
                        </select>
                    </div>
                </div>

                @*  Panel Definicion de Valores Movimientos y Cuentas  *@

                <div class="col-sm-12">
                    <div id="panelDefinicionMovimientosCuentas">
                        <div class="hpanel">
                            @*  <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                            *@
                            <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                                <div class="panel-tools">
                                    <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                                </div>
                                <i class="fa fa-credit-card-alt"></i>&nbsp;&nbsp;Definici&oacute;n de Movimientos y Cuentas
                            </div>
                            <div class="panel-body" id="definicionMovimientosCuentas">
                                <div id="buscar" class="tab-pane">
                                    <div class="panel-body-busqueda">
                                        <div class="table-responsive">
                                            <div id="div-mensaje-buscar"></div>
                                            @*  Tabla de Valores de Movimientos y Cuentas  *@
                                            <table class="table table-striped table-bordered table-hover tablaDetallesDefinicionesMovimientosCuentas" id="tablaDetallesDefinicionesMovimientosCuentas">
                                                <thead>
                                                    <tr>
                                                        <th style="text-align:center">Tipo</th>
                                                        <th style="text-align:center">Descripci&oacute;n</th>
                                                        <th style="text-align:center">Cuenta</th>
                                                        <th style="text-align:center">Descipci&oacute;n Cuenta</th>
                                                        <th style="text-align:center">Oper</th>
                                                        <th style="text-align:center">Que</th>
                                                        <th style="text-align:center">Acci&oacute;n</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                        <div class="panel-body-btns text-right">
                                            @*<button class="btn btn-info" type="button" id="btnAgregarDefCons"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;Agregar</button>*@
                                            <button type="submit" class="btn btn-info" name="submitAgregarMovCts" id="submitAgregarMovCts"><font><font>Agregar Movimientos y Cuentas</font></font></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <label></label>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                @*<button type="button" class="btn btn-primary" id="btnGuardaDefCMovCuenta">Guardar</button>*@
            </div>
        </div>
    </div>

        }
</div>

@*******     Modal Definicion de Documentos *********@
<div class="modal fade hmodal-success in" id="modalDefinicionDocumentos" tabindex="-1" role="dialog" aria-hidden="true">
    @using (Html.BeginForm("AgregarDocumentosBD", "medmagconstantes", FormMethod.Post, new { @name = "defDocuBD", @id = "defDocuBD" }))
        {
        @*@using (Html.BeginForm())*@
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="color-line"></div>
                <div class="modal-header">
                    <h4 class="modal-title">Definici&oacute;n de Documentos </h4>
                    <small class="font-bold">Defina la siguiente información correspondiente a los Documentos</small>
                </div>

                @*@using (Html.BeginForm("DevolverFacturaManual", "devolucionVentaAutomatica", FormMethod.Post, new { enctype = "multipart/form-data", @target = "_blank" }))
                    {*@
                @Html.AntiForgeryToken()

                <div class="modal-body">

                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <input type="hidden" name="id_encabezado" id="id_encabezado" value="" />
                    <input type="hidden" name="id_val" id="id_val" value="" />
                    <input type="hidden" name="id_OptionTipMov" id="id_OptionTipMov" value="" />

                    @* mensajes *@
                    <div class="alert alert-success  alert-dismissible" style="display: none" id="mensaje">
                        <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                        <p id="cuerpo_mensaje"></p>
                    </div>

                    <div class="alert alert-danger  alert-dismissible" style="display: none" id="mensaje_error">
                        <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                        <p id="cuerpo_mensaje_error"></p>
                    </div>

                    <div class="alert alert-success alert-dismissible" style="display: none" id="mensaje_enviando">
                        <button type="button" class="close" data-dismiss="alert" arial-label="close"><span aria-hidden="true">&times;</span></button>
                        <p id="cuerpo_mensaje_enviando"></p>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-md-4">Tipo Doc:&nbsp;<span class="text-danger">*</span></label>
                            <div class="col-md-8">
                                @Html.DropDownList("tpdoc_id2", null, "Seleccione", htmlAttributes: new { @class = "form-control js-source-states", @placeholder = "Seleccione" })
                                @Html.ValidationMessageFor(model => model.Viewtp_doc_registros.tpdoc_id, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-md-4">Campos:&nbsp;<span class="text-danger">*</span></label>
                            <div class="col-md-8">
                                @Html.DropDownList("id", null, "Seleccione", htmlAttributes: new { @class = "form-control js-source-states", @placeholder = "Seleccione" })
                                @Html.ValidationMessageFor(model => model.Viewmediostipovalor.id, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-md-6">Operación:&nbsp;<span class="text-danger">*</span></label>
                            <select id="OptValorOperD" name="OptValorOperD">
                                <option value="+"> Suma </option>
                                <option value="-"> Resta </option>
                            </select>
                        </div>
                    </div>

                    @*  Panel Definicion de Documentos  *@

                    <div class="col-sm-12">
                        <div id="panelDefinicionDocument">
                            <div class="hpanel">
                                @*  <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                                *@
                                <div class="panel-heading hbuilt" style="background-color:#e4e5e7">
                                    <div class="panel-tools">
                                        <a class="showhide"><i class="fa fa-chevron-down"></i></a>
                                    </div>
                                    <i class="fa fa-credit-card-alt"></i>&nbsp;&nbsp;Definici&oacute;n de Documentos
                                </div>
                                <div class="panel-body" id="definicionDocument">
                                    <div id="buscar" class="tab-pane">
                                        <div class="panel-body-busqueda">
                                            <div class="table-responsive">
                                                <div id="div-mensaje-buscar"></div>
                                                @*  Tabla de Valores Constantes  *@
                                                <table class="table table-striped table-bordered table-hover tablaDetallesDefinicionesDocument" id="tablaDetallesDefinicionesDocument">
                                                    <thead>
                                                        <tr>
                                                            @*
                                                                <th style="text-align:center">Tipo</th>
                                                                <th style="text-align:center">Descripcion</th>*@
                                                            <th style="text-align:center">Tipo</th>
                                                            <th style="text-align:center">Campo</th>
                                                            <th style="text-align:center">Oper</th>
                                                            @*
                                                                <th style="text-align:center">Que</th>*@
                                                            <th style="text-align:center">Acci&oacute;n</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                            <div class="panel-body-btns text-right">
                                                @*<button class="btn btn-info" type="button" id="btnAgregarDefCons"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;&nbsp;Agregar</button>*@
                                                <button type="submit" class="btn btn-info" name="submitAgregarDocument" id="submitAgregarDocument"><font><font>Agregar Documentos</font></font></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <label></label>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    @*<button type="button" class="btn btn-primary" id="btnGuardaDefCMovCuenta">Guardar</button>*@
                </div>
            </div>
        </div>

            }
</div>


@section Scripts {
    @Scripts.Render("~/bundles/select2/js")
    <script src="~/Vendor/BootstrapMultiselect/multiselect.js"></script>
    <script src="~/Vendor/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="~/Vendor/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script src="~/Vendor/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="~/Vendor/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="~/Vendor/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="~/Vendor/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
    <script src="~/Vendor/datatablesExcelExport/dataTable1.4.0-buttons.js"></script>
    <script src="~/Vendor/datatablesExcelExport/JSZip3.1.3.min.js"></script>
    <script src="~/Vendor/pdfmake/build/pdfmake.min.js"></script>
    <script src="~/Vendor/pdfmake/build/vfs_fonts.js"></script>
    <script src="~/Vendor/datatablesExcelExport/jsZipDataTables.js"></script>
    <script src="~/Vendor/sweetalert/lib/sweet-alert.min.js"></script>
    <script src="~/Vendor/sweetalert/lib/sweet-alert.js"></script>
    <script src="~/Vendor/bootstrap-toggle-master/js/bootstrap-toggle.min.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            // var yannio = $('#anio').val();
            var yannio = $("#anio").find("input").val();
            var yforma = $('#formato').val();
            var yconce = $('#concepto').val();


            var Wrannio = $('#rannio').val();
            var Wrforma = $('#rformato').val();
            var Wrconce = $('#rconcepto').val();


            $('#panelDefinicionConstantes').find('.showhide').trigger('click');
            $('#panelDefinicionSobreBaseDatos').find('.showhide').trigger('click');

            // $('#rformato').val('').trigger('change');

            $('#definicion').val('').trigger('change');



            $('.js-source-states').select2();

            $('#tercero_id').select2(); /// Esto es para el nit


            $('#cntpuc_id').select2();
            $('#tpdoc_id').select2();
            $('#tpdoc_id2').select2();
            $('#idTval').select2();
            $('#id').select2();
            $('#rformato').select2();

            //    $('#excelformato').select2();

            $('#rconcepto').multiselect({
                includeSelectAllOption: true,
                maxHeight: 400,
                dropUp: false
            });

            $('#toprmm').bootstrapToggle('off')

            $("#excelanio").datepicker({
                format: "yyyy",
                viewMode: "years",
                minViewMode: "years"
            });
            $("#anio").datepicker({
                format: "yyyy",
                viewMode: "years",
                minViewMode: "years"
            });
            //$('#excelformato').multiselect({
            //    includeSelectAllOption: true,
            //    maxHeight: 400,
            //    dropUp: false
            //});
            $('#excelconcepto').multiselect({
                includeSelectAllOption: true,
                maxHeight: 400,
                dropUp: false
            });

            //document.getElementById["unoxx"].submit();

        });

        var WWWExcel;
        /// se ejecuta del boton del panel Definicion de Valores Constantes
        $('#btnAgregarDefCons').click(function () {

            //  $("#annio").prop('required', true);
            var panio = $("#anio").find("input").val();

            if (panio == '' || $('#formato').val() == '' || $('#concepto').val() == '') {

                $('#mensaje_error').text('Los campos marcados con (*) son obligatorios');
                $('#mensaje_error').show();
                $('#alertAgregarConstantes').show();
                setTimeout(function () {
                    $("#alertAgregarConstantes").fadeOut(1500);
                }, 3000);
            }
            else {
                $("#txtValor1").val('');
                $("#txtValor2").val('');
                $("#txtValor3").val('');
                $("#txtValor4").val('');
                $("#txtValor5").val('');
                $("#txtValor6").val('');
                $("#txtValor7").val('');
                $("#txtValor8").val('');
                $("#txtValor9").val('');
                $("#txtValor10").val('');
                $("#txtValor11").val('');
                $("#txtdescripcion").val('');

                $('#mensaje_enviando').hide();
                // esto cambia a seleccione nuevamente
                $('#tercero_id').val('').trigger('change');

                $("#panelDefinicionConstantes").show();
                $('#modalDefinicionValoresconstantes').modal('show');
            }
            console.log("Paso por btnAgregarDefCons");
        });

        /////******** Proceso de generacion de Archivo de Medios Magneticos
        $('#btnAgregarRegGenerados').click(function () {
            console.log("Entra a btnAgregarRegGenerados");
            $("#rannio").prop('required', true);

            var Wannio_gmm = parseInt($('#rannio').val());
            var Wforma_gmm = parseInt($('#rformato').val());
            var Wconce_gmm = $('#rconcepto').val(); // se pasa asi ya que puede ser un vector


            if ($('#rannio').val() != '' || $('#rformato').val() != '' || $('#rconcepto').val() != '') {

                console.log("esta en <<btnAgregarRegGenerados>> Año:" + Wannio_gmm + " Formato:" + Wforma_gmm + " Concepto:" + Wconce_gmm);
                BuscarContabilidad(Wannio_gmm, Wforma_gmm, Wconce_gmm);
                console.log("Paso por btnAgregarRegGenerados");
                $('#mensaje_enviando').hide();
                $("#panelRegistrosGenerados").show();
            }

        });

        $('#btnCopiarConf').click(function () {
            CopiarGenMov();
        });


        $('#btnExcel').click(function () {
            var opcionTope = true;
            if ($('#toprmm').prop('checked')) {
                opcionTope = true;
            } else {
                opcionTope = false;
            };

            var localannio = $("#excelanio").find("input").val();
            // var localforma = $("#excelformato").val();
            var localforma = WWWExcel;
            var localconce = $('#excelconcepto').val();
            console.log(" Entra al btn Excel Año " + localannio + "  Formato: " + localforma + "  Concepto: " + localconce);

            if (opcionTope == false) {
                if (localannio != '' && localconce != '') {
                                window.open('@Url.Action("MediosExcelDefinitivo", "medmagconstantes")?excelanio=' + localannio + '&excelformato=' + localforma + '&excelconcepto=' + localconce, '_blank');
                                var xannio = localannio;
                                var xformato = localforma;
                                var xconcepto = localconce;
                                var op
                                MostrarTodosExcel(xannio, xformato, xconcepto, opcionTope);
                            }
            }
            else
            {
                 if (localannio != '' && localconce != '') {
                                window.open('@Url.Action("MediosExcelDefinitivoTope", "medmagconstantes")?excelanio=' + localannio + '&excelformato=' + localforma + '&excelconcepto=' + localconce, '_blank');
                                var xannio = localannio;
                                var xformato = localforma;
                                var xconcepto = localconce;
                                var op
                                MostrarTodosExcel(xannio, xformato, xconcepto, opcionTope);
                            }
            }







        });

        function MostrarTodosExcel(xannio, xformato, xconcepto, op) {
            if (xannio == '') { xannio = 0; }
            if (xformato == '') { xformato = 0; }

            var opcionTope = true;
            if ($('#toprmm').prop('checked')) {
                opcionTope = true;
            } else {
                opcionTope = false;
            };


            if (xannio != '' && xformato != '') {
                $("#panelGenerarExcel").show();
                $("#tablaDetallesparaexcel").dataTable().fnDestroy();
                $('#tablaDetallesparaexcel').find('tbody').empty();

                $.ajax(
                    {
                        url: '/medmagconstantes/BuscarRegMedMag2',
                        data:
                            {
                                xannio,
                                xformato,
                                xconcepto,
                                op: opcionTope
                            },

                        type: "post",
                        cache: false,
                        success: function (data) {
                            if (data != 0) {
                                for (var i = 0; i < data.length ; i++) {
                                    $('#tablaDetallesparaexcel')
                                       .find('tbody')
                                       .append('<tr><td align="center"><input type="hidden" id="annio' + data[i].ano + '" value="' + data[i].ano + '">' + data[i].ano
                                       + '</td><td align="center"><input type="hidden" id="formato' + data[i].formato + '" value="' + data[i].formato + '">' + data[i].formato
                                       + '</td><td align="center"><input type="hidden" id="concepto' + data[i].concepto + '" value="' + data[i].concepto + '">' + data[i].concepto
                                       + '</td><td align="lefth"><input type="hidden" id="nit' + data[i].nit + '" value="' + data[i].nit + '">' + data[i].tercero
                                       + '</td><td align="right"><input type="hidden" id="val1' + data[i].val1 + '" value="' + data[i].val1 + '">$' + addCommas(data[i].val1)
                                       + '</td><td align="right"><input type="hidden" id="val2' + data[i].val2 + '" value="' + data[i].val2 + '">$' + addCommas(data[i].val2)
                                       + '</td><td align="right"><input type="hidden" id="val3' + data[i].val3 + '" value="' + data[i].val3 + '">$' + addCommas(data[i].val3)
                                       + '</td><td align="right"><input type="hidden" id="val4' + data[i].val4 + '" value="' + data[i].val4 + '">$' + addCommas(data[i].val4)
                                       + '</td><td align="right"><input type="hidden" id="val5' + data[i].val5 + '" value="' + data[i].val5 + '">$' + addCommas(data[i].val5)
                                       + '</td><td align="right"><input type="hidden" id="val6' + data[i].val6 + '" value="' + data[i].val6 + '">$' + addCommas(data[i].val6)
                                       + '</td><td align="right"><input type="hidden" id="val7' + data[i].val7 + '" value="' + data[i].val7 + '">$' + addCommas(data[i].val7)
                                       + '</td><td align="right"><input type="hidden" id="val8' + data[i].val8 + '" value="' + data[i].val8 + '">$' + addCommas(data[i].val8)
                                       + '</td><td align="right"><input type="hidden" id="val9' + data[i].val9 + '" value="' + data[i].val9 + '">$' + addCommas(data[i].val9)
                                       + '</td><td align="right"><input type="hidden" id="val10' + data[i].val0 + '" value="' + data[i].val0 + '">$' + addCommas(data[i].val10)
                                       + '</td><td align="right"><input type="hidden" id="val11' + data[i].val11 + '" value="' + data[i].val11 + '">$' + addCommas(data[i].val11)
                                       + '</td></tr>');

                                    //+ '</td><td width="25%" align="center"><button class="btn btn-primary btn-xs" onclick="VerObser('
                                    //+ data[i].id + ')"><i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;</button>&nbsp;<button class="btn btn-danger btn-xs" onclick="EliminarVari('
                                    //+ data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');

                                }
                            }
                        },
                        complete: function (data) {
                            $('#tablaDetallesparaexcel').dataTable({
                                //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
                                dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
                                "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                                buttons: [
                               // { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
                               // { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
                                //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
                                ]
                            });

                        }
                    });
            }



        }

        function CopiarGenMov() {
            //var wannio_copia = parseInt($("#anio").val());
            var wannio_copia = parseInt($("#anio").find("input").val());
            event.preventDefault();
            $.ajax({
                url: '/medmagconstantes/CopiarNuevoConf',
                data: {
                    annio_copia: wannio_copia,
                },
                type: "post",
                cache: false,
                success: function (data) {

                    //$("#txtObser").val(data.descripcion);
                    //$("#txtValor1").val(data.val1);
                    //$("#txtValor2").val(data.val2);
                    //$("#txtValor3").val(data.val3);
                    //$("#txtValor4").val(data.val4);
                    //$("#txtValor5").val(data.val5);
                    //$("#txtValor6").val(data.val6);
                    //$("#txtValor7").val(data.val7);
                    //$("#txtValor8").val(data.val8);
                    //$("#txtValor9").val(data.val9);
                    //$("#txtValor10").val(data.val10);
                    //$("#txtValor11").val(data.val11);

                },
                complete: function (data) {
                    // $('#modalObservacion').modal('show');
                }

            });
        }


        function BuscarContabilidad(Wannio_gmm, Wforma_gmm, Wconce_gmm) {
            var xannio = Wannio_gmm;
            var xformato = Wforma_gmm;
            var xconcepto = Wconce_gmm;

            var opcionTope = true;
            if ($('#toprmm').prop('checked')) {
                opcionTope = true;
            } else {
                opcionTope = false;
            };
            console.log("Valor del tope" + opcionTope + " Año:" + xannio + " Formato: " + xformato + " Concepto:" + xconcepto);
            //  EliminarRegistrosMediosMagneticos(Wannio_gmm, Wforma_gmm);

            /////***********************************************


            if (opcionTope == false) {
                event.preventDefault();
                swal({
                    title: "Estás seguro?",
                    text: "Se Eliminara los Registros de Medios Magneticos previos !",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: '#DD6B55',
                    confirmButtonText: 'Aceptar!!',
                    cancelButtonText: "Cancelar!!",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                       function (isConfirm) {
                           if (isConfirm) {

                               $.ajax({
                                   url: '/medmagconstantes/eliminarRegistrosMediosMagneticosBD',
                                   data: {
                                       Wannio_gmm: xannio,
                                       Wforma_gmm: xformato,
                                       // Wconce_gmm : xconcepto
                                   },
                                   type: "post",
                                   cache: false,
                                   success: function (data) {
                                       if (data == true) {
                                           swal("Eliminado!", "Se ha Eliminado los Registros de Medios Magneticos previos  !", "success");
                                           //  MostrarTodosRegistros(xannio, xformato, xconcepto,'');
                                       }
                                   },
                                   complete: function (data) {
                                       $.ajax(
                                             {
                                                 url: '/medmagconstantes/BuscarContab',
                                                 data:
                                                     {
                                                         Wannio_gmm,
                                                         Wforma_gmm,
                                                         Wconce_gmm,
                                                         opcionTope,
                                                     },
                                                 type: "post",
                                                 cache: false,
                                                 success: function (result) {
                                                     console.log("sale de BuscarContab con result: " + result);
                                                     if (result == true) {
                                                         //console.log("Esta en  " + result);
                                                         //  MostrarTodosRegistros(Wannio_gmm, Wforma_gmm, Wconce_gmm, opcionTope);
                                                     }
                                                 },
                                                 complete: function (data) {
                                                     MostrarTodosRegistros(Wannio_gmm, Wforma_gmm, Wconce_gmm, opcionTope);

                                                 }
                                             });

                                   }
                               });

                           } else {
                               swal("Cancelado", "No se Eliminado los Registros de Medios Magneticos previos )", "error");
                           }
                       });
            } else {
                event.preventDefault();
                swal({
                    title: "Estás seguro?",
                    text: "Se Eliminara los Registros de Medios Magneticos con Tope previos !",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: '#DD6B55',
                    confirmButtonText: 'Aceptar!!',
                    cancelButtonText: "Cancelar!!",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                       function (isConfirm) {
                           if (isConfirm) {

                               $.ajax({
                                   url: '/medmagconstantes/eliminarRegistrosMediosMagneticosBDTope',
                                   data: {
                                       Wannio_gmm: xannio,
                                       Wforma_gmm: xformato,
                                       // Wconce_gmm : xconcepto
                                   },
                                   type: "post",
                                   cache: false,
                                   success: function (data) {
                                       if (data == true) {
                                           swal("Eliminado!", "Se ha Eliminado los Registros de Medios Magneticos con tope previos  !", "success");
                                           //  MostrarTodosRegistros(xannio, xformato, xconcepto,'');
                                       }
                                   },
                                   complete: function (data) {
                                       $.ajax(
                                             {
                                                 url: '/medmagconstantes/BuscarContabTope',
                                                 data:
                                                     {
                                                         Wannio_gmm,
                                                         Wforma_gmm,
                                                         Wconce_gmm,
                                                         opcionTope,
                                                     },
                                                 type: "post",
                                                 cache: false,
                                                 success: function (result) {
                                                     console.log("sale de BuscarContab con result: " + result);
                                                     if (result == true) {
                                                         //console.log("Esta en  " + result);
                                                         //  MostrarTodosRegistros(Wannio_gmm, Wforma_gmm, Wconce_gmm, opcionTope);
                                                     }
                                                 },
                                                 complete: function (data) {
                                                     Limpiar222Vacios(Wannio_gmm, Wforma_gmm, xconcepto);
                                                     // MostrarTodosRegistros(Wannio_gmm, Wforma_gmm, Wconce_gmm, opcionTope);

                                                 }
                                             });

                                   }
                               });

                           } else {
                               swal("Cancelado", "No se Eliminado los Registros de Medios Magneticos previos )", "error");
                           }
                       });
            }
        }

        function Limpiar222Vacios(Wannio_gmm, Wforma_gmm, Wconce_gmm) {

            var opcionTope = true;
            if ($('#toprmm').prop('checked')) {
                opcionTope = true;
            } else {
                opcionTope = false;
            };


            var Auxiliar = 4275;


                           $.ajax({
                               url: '/medmagconstantes/eliminarRegistrosTope22',
                               data: {
                                   Wannio_gmm,
                                   Wforma_gmm,
                                   Wconce_gmm,
                                   Auxiliar
                               },
                               type: "post",
                               cache: false,
                               success: function (data) {
                                   if (data == true) {

                                       MostrarTodosRegistros(Wannio_gmm, Wforma_gmm, Wconce_gmm, opcionTope);
                                   }
                               }
                           });

             }

        function EliminarRegistrosMediosMagneticos(Wannio_gmm, Wforma_gmm) {
            var xannio = parseInt($("#rannio").val());
            var xformato = parseInt($("#rformato").val());

            console.log("Eliminar Registros anteriores " + xannio + " " + xformato);
            event.preventDefault();
            swal({
                title: "Estás seguro?",
                text: "Se Eliminara los Registros de Medios Magneticos previos !",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Aceptar!!',
                cancelButtonText: "Cancelar!!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
                   function (isConfirm) {
                       if (isConfirm) {

                           $.ajax({
                               url: '/medmagconstantes/eliminarRegistrosMediosMagneticosBD',
                               data: {
                                   Wannio_gmm: xannio,
                                   Wforma_gmm: xformato,
                                   // Wconce_gmm : xconcepto
                               },
                               type: "post",
                               cache: false,
                               success: function (data) {
                                   if (data == true) {
                                       swal("Eliminado!", "Se ha Eliminado los Registros de Medios Magneticos previos  !", "success");
                                       //  MostrarTodosRegistros(xannio, xformato, xconcepto,'');
                                   }
                               }
                           });

                       } else {
                           swal("Cancelado", "No se Eliminado los Registros de Medios Magneticos previos )", "error");
                       }
                   });



        }


        /// Submit medios variables Constantes
        $('#submitmediosconv').click(function (e) {

            //$("#annio").prop('required', true);
            // debugger;
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());
            var xnit = $('#tercero_id').val();  /// valor seleccionado del DropDownList
            var xval1 = quitCommas($("#txtValor1").val());
            var xval2 = quitCommas($("#txtValor2").val());
            var xval3 = quitCommas($("#txtValor3").val());
            var xval4 = quitCommas($("#txtValor4").val());
            var xval5 = quitCommas($("#txtValor5").val());
            var xval6 = quitCommas($("#txtValor6").val());
            var xval7 = quitCommas($("#txtValor7").val());
            var xval8 = quitCommas($("#txtValor8").val());
            var xval9 = quitCommas($("#txtValor9").val());
            var xval10 = quitCommas($("#txtValor10").val());
            var xval11 = quitCommas($("#txtValor11").val());
            var xobservacion = $("#txtdescripcion").val();


            if (xannio == '' || $('#formato').val() == '' || $('#concepto').val() == '' || $('#tercero_id').val() == '') {

                //$('#mensajeAgregarConstantes').text('Los campos marcados con (*) son obligatorios');
                $('#alertAgregarConstantes').show();
                setTimeout(function () {
                    $("#alertAgregarConstantes").fadeOut(1500);
                }, 3000);
            }
            else {

                ///***
                var form = $('#defconstantes');
                var valid = this.form.checkValidity();
                if (valid) {
                    event.preventDefault();

                    $.ajax
                       (
                        {
                            url: '/medmagconstantes/AgregarConstantes',
                            type: 'POST',
                            data:
                                 {
                                     idanio: xannio,
                                     idformato: xformato,
                                     idconcepto: xconcepto,
                                     nit: xnit,
                                     Val1: xval1,
                                     Val2: xval2,
                                     Val3: xval3,
                                     Val4: xval4,
                                     Val5: xval5,
                                     Val6: xval6,
                                     Val7: xval7,
                                     Val8: xval8,
                                     Val9: xval9,
                                     Val10: xval10,
                                     Val11: xval11,
                                     observacion: xobservacion,
                                 },
                            beforeSend: function (objeto) {
                                $('#mensaje_enviando').show();
                                $('#cuerpo_mensaje_enviando').html('<i class="fa fa-spinner text-center" aria-hidden="true" ></i> Enviando datos...')
                                setTimeout(function () {
                                    $("#mensaje_enviando").fadeOut(1500);
                                }, 3000);

                            },
                        }).done(function (result) {
                            //  $('#mensaje_enviando').hide();

                            if (result == 1) {

                                $("#mensaje").html('<i class="fa fa-check" aria-hidden="true" ></i> Definicion de Constantes agregado con exito');
                                $("#mensaje").show();
                                //   $('#mensaje_enviando').hiden();

                                setTimeout(function () {
                                    $("#mensaje").fadeOut(1500);
                                }, 3000);

                                $("#txtValor1").val('');
                                $("#txtValor2").val('');
                                $("#txtValor3").val('');
                                $("#txtValor4").val('');
                                $("#txtValor5").val('');
                                $("#txtValor6").val('');
                                $("#txtValor7").val('');
                                $("#txtValor8").val('');
                                $("#txtValor9").val('');
                                $("#txtValor10").val('');
                                $("#txtValor11").val('');
                                $("#txtdescripcion").val('');


                                MostrarTodasDefiniconesConstantes(xannio, xformato, xconcepto);

                            } else {
                                $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en guardar Definicion de Constantes');
                                $("#mensaje_error").show();


                            }


                        });
                } else {
                    $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en guardar Definicion de Constantes. Debe seleccionar mínimo un nit');
                    $("#mensaje_error").show();

                }
                //***
            }

        });

        //----Funcion que valida que el campo solo tenga permitido el ingreso de numeros
        function soloNumeros(e) {
            key = e.keyCode || e.which;
            tecla = String.fromCharCode(key).toLowerCase();
            letras = "1234567890";
            especiales = "8-37-39-46";

            tecla_especial = false
            for (var i in especiales) {
                if (key == especiales[i]) {
                    tecla_especial = true;
                    break;
                }
            }
            if (letras.indexOf(tecla) == -1 && !tecla_especial) {
                return false;
            }
        }

        // Mostrar todos las Constantes
        function MostrarTodasDefiniconesConstantes(xannio, xformato, xconcepto) {
            if (xannio == '') { xannio = 0; }
            if (xformato == '') { xformato = 0; }
            if (xconcepto == '') { xconcepto = 0; }

            $("#panelDefinicionConstantes").show();
            //$("#tablaDetallesDefinicionesValoresConstantes").dataTable().fnDestroy();
            //$('#tablaDetallesDefinicionesValoresConstantes').find('tbody').empty();

            $.ajax(
                {
                    url: '/medmagconstantes/BuscarConstantes',
                    data:
                        {
                            xannio,
                            xformato,
                            xconcepto,
                        },

                    type: "post",
                    cache: false,
                    success: function (data) {
                        if (data != 0) {
                            for (var i = 0; i < data.length ; i++) {
                                $("#tablaDetallesDefinicionesValoresConstantes").dataTable().fnDestroy();
                                $('#tablaDetallesDefinicionesValoresConstantes').find('tbody').empty();
                                $('#tablaDetallesDefinicionesValoresConstantes')
                                   .find('tbody')
                                   .append('<tr><td align="center"><input type="hidden" id="annio' + data[i].ano + '" value="' + data[i].ano + '">' + data[i].ano
                                   + '</td><td align="center"><input type="hidden" id="formato' + data[i].formato + '" value="' + data[i].formato + '">' + data[i].formato
                                   + '</td><td align="center"><input type="hidden" id="concepto' + data[i].concepto + '" value="' + data[i].concepto + '">' + data[i].concepto
                                   + '</td><td align="center"><input type="hidden" id="nit' + data[i].nit + '" value="' + data[i].nit + '">' + data[i].nit
                                   + '</td><td align="right"><input type="hidden" align="right" id="val1' + data[i].val1 + '" value="' + data[i].val1 + '">$' + addCommas(data[i].val1)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val2' + data[i].val2 + '" value="' + data[i].val2 + '">$' + addCommas(data[i].val2)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val3' + data[i].val3 + '" value="' + data[i].val3 + '">$' + addCommas(data[i].val3)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val4' + data[i].val4 + '" value="' + data[i].val4 + '">$' + addCommas(data[i].val4)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val5' + data[i].val5 + '" value="' + data[i].val5 + '">$' + addCommas(data[i].val5)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val6' + data[i].val6 + '" value="' + data[i].val6 + '">$' + addCommas(data[i].val6)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val7' + data[i].val7 + '" value="' + data[i].val7 + '">$' + addCommas(data[i].val7)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val8' + data[i].val8 + '" value="' + data[i].val8 + '">$' + addCommas(data[i].val8)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val9' + data[i].val9 + '" value="' + data[i].val9 + '">$' + addCommas(data[i].val9)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val10' + data[i].val0 + '" value="' + data[i].val0 + '">$' + addCommas(data[i].val10)
                                   + '</td><td align="right"><input type="hidden" align="right" id="val11' + data[i].val11 + '" value="' + data[i].val11 + '">$' + addCommas(data[i].val11)
                                   + '</td><td width="25%" align="center"><button class="btn btn-primary btn-xs" onclick="VerObser('
                                   + data[i].id + ')"><i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;</button>&nbsp;<button class="btn btn-danger btn-xs" onclick="EliminarVari('
                                   + data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');
                                // + '</td><td align="center"><input type="hidden" id="observacion' + data[i].observacion + '" value="' + data[i].observacion + '">' + data[i].observacion
                            }
                        }
                    },
                    complete: function (data) {
                        $('#tablaDetallesDefinicionesValoresConstantes').dataTable({
                            //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
                            dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
                            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                            buttons: [
                            { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
                            { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
                            //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
                            ]
                        });

                    }
                });

        }

        function MostrarTodosRegistros(xannio, xformato, xconcepto, xop) {
            if (xannio == '') { xannio = 0; }
            if (xformato == '') { xformato = 0; }
            if (xconcepto == '') { xconcepto = 0; }

            var opcionTope = true;
            if ($('#toprmm').prop('checked')) {
                opcionTope = true;
            } else {
                opcionTope = false;
            };

            var TopeSi = xop;
            console.log('Tope = ' + TopeSi + " Año:  " + xannio + " Formato: " + xformato + " Concepto: " + xconcepto);

            $("#panelRegistrosGenerados").show();
            $("#tablaDetallesRegistrosGenerados").dataTable().fnDestroy();
            $('#tablaDetallesRegistrosGenerados').find('tbody').empty();

            $.ajax(
                {
                    url: '/medmagconstantes/BuscarRegMedMag2',
                    data:
                        {
                            xannio,
                            xformato,
                            xconcepto,
                            op: opcionTope
                        },

                    type: "post",
                    cache: false,
                    success: function (data) {
                        if (data != 0) {
                            for (var i = 0; i < data.length ; i++) {
                                $('#tablaDetallesRegistrosGenerados')
                                   .find('tbody')
                                   .append('<tr><td align="center"><input type="hidden" id="annio' + data[i].ano + '" value="' + data[i].ano + '">' + data[i].ano
                                   + '</td><td align="center"><input type="hidden" id="formato' + data[i].formato + '" value="' + data[i].formato + '">' + data[i].formato
                                   + '</td><td align="center"><input type="hidden" id="concepto' + data[i].concepto + '" value="' + data[i].concepto + '">' + data[i].concepto
                                   + '</td><td align="lefth"><input type="hidden" id="nit' + data[i].nit + '" value="' + data[i].nit + '">' + data[i].tercero
                                   + '</td><td align="right"><input type="hidden" id="val1' + data[i].val1 + '" value="' + data[i].val1 + '">$' + addCommas(data[i].val1)
                                   + '</td><td align="right"><input type="hidden" id="val2' + data[i].val2 + '" value="' + data[i].val2 + '">$' + addCommas(data[i].val2)
                                   + '</td><td align="right"><input type="hidden" id="val3' + data[i].val3 + '" value="' + data[i].val3 + '">$' + addCommas(data[i].val3)
                                   + '</td><td align="right"><input type="hidden" id="val4' + data[i].val4 + '" value="' + data[i].val4 + '">$' + addCommas(data[i].val4)
                                   + '</td><td align="right"><input type="hidden" id="val5' + data[i].val5 + '" value="' + data[i].val5 + '">$' + addCommas(data[i].val5)
                                   + '</td><td align="right"><input type="hidden" id="val6' + data[i].val6 + '" value="' + data[i].val6 + '">$' + addCommas(data[i].val6)
                                   + '</td><td align="right"><input type="hidden" id="val7' + data[i].val7 + '" value="' + data[i].val7 + '">$' + addCommas(data[i].val7)
                                   + '</td><td align="right"><input type="hidden" id="val8' + data[i].val8 + '" value="' + data[i].val8 + '">$' + addCommas(data[i].val8)
                                   + '</td><td align="right"><input type="hidden" id="val9' + data[i].val9 + '" value="' + data[i].val9 + '">$' + addCommas(data[i].val9)
                                   + '</td><td align="right"><input type="hidden" id="val10' + data[i].val0 + '" value="' + data[i].val0 + '">$' + addCommas(data[i].val10)
                                   + '</td><td align="right"><input type="hidden" id="val11' + data[i].val11 + '" value="' + data[i].val11 + '">$' + addCommas(data[i].val11)
                                   + '</td></tr>');

                                //+ '</td><td width="25%" align="center"><button class="btn btn-primary btn-xs" onclick="VerObser('
                                //+ data[i].id + ')"><i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;</button>&nbsp;<button class="btn btn-danger btn-xs" onclick="EliminarVari('
                                //+ data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');

                            }
                        }
                    },
                    complete: function (data) {
                        $('#tablaDetallesRegistrosGenerados').dataTable({
                            //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
                            dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
                            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                            buttons: [
                           // { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
                           // { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
                            //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
                            ]
                        });

                    }
                });


        }

        // Eliminar Constante seleccionada
        function EliminarVari(id) {
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());
            event.preventDefault();
            $.ajax({
                url: '/medmagconstantes/eliminarVariable',
                data: {
                    idDetalle: id,
                },
                type: "post",
                cache: false,
                success: function (data) {
                    if (data == true) {
                        MostrarTodasDefiniconesConstantes(xannio, xformato, xconcepto);
                    }
                }
            });
        }

        // Mostrar Observacion de una constante
        function VerObser(id) {
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());

            event.preventDefault();
            $.ajax({
                url: '/medmagconstantes/BuscarObservacion',
                data: {
                    idDetalle: id,
                },
                type: "post",
                cache: false,
                success: function (data) {

                    $("#txtObser").val(data.descripcion);
                    $("#txtValor1").val(data.val1);
                    $("#txtValor2").val(data.val2);
                    $("#txtValor3").val(data.val3);
                    $("#txtValor4").val(data.val4);
                    $("#txtValor5").val(data.val5);
                    $("#txtValor6").val(data.val6);
                    $("#txtValor7").val(data.val7);
                    $("#txtValor8").val(data.val8);
                    $("#txtValor9").val(data.val9);
                    $("#txtValor10").val(data.val10);
                    $("#txtValor11").val(data.val11);

                },
                complete: function (data) {
                    $('#modalObservacion').modal('show');
                }

            });
        }

        function BuscarTerceroVariable(idter) {
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());

            event.preventDefault();
            $.ajax({
                url: '/medmagconstantes/BuscarTerVariable',
                data: {
                    idanio: xannio,
                    idformato: xformato,
                    idconcepto: xconcepto,
                    idter: idter
                },
                type: "post",
                cache: false,
                success: function (data) {
                    $("#txtObser").val(data.descripcion);

                },
                complete: function (data) {
                    //  $('#modalObservacion').modal('show');
                }

            });
        }

        /// Acciones al cambiar contenido de campos principales inicio
        $('#anio').change(function () {
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());

            buscarFormato();
            // MostrarTodasDefiniconesConstantes(xannio, xformato, xconcepto);
            // MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
            console.log("paso por cambio del año")



        });

        $('#rannio').change(function () {
            var wrannio = parseInt($("#rannio").val());
            //var xformato = parseInt($("#formato").val());
            //var xconcepto = parseInt($("#concepto").val());

            var input = document.getElementById('rannio');
            if (input.value.length < 4 || input.value.length > 4) {
                alert('Escribe solo 4 carácteres.');
            }

            buscarFormatoR();

            console.log("paso por cambio del año en Archivos de Medios Magneticos")

        });


        function annio2() {
            var wrannio = parseInt($("#rannio").val());
            buscarFormatoR();
            console.log("paso por Funcion cambio del AÑO en Archivos de Medios Magneticos")
        }



        $('#excelanio').change(function () {

            var wannio = $("#excelanio").find("input").val();

            buscarFormatoParaExcel(wannio);
            console.log("AÑO " + wannio)
            console.log("paso por excel anio ")

        });

        $('#excelformato').change(function () {

            var wannio = $("#excelanio").find("input").val();
            var wformato = $('#excelformato').val();
            WWWExcel = $('#excelformato').val();
            console.log(" esto ocurre en change excelformato = >  AÑO " + wannio + " Formato " + wformato + " Concepto") //  de CHANGE Concepto
            if (wannio != '' && wformato != '') {
                buscarConceptoParaExcel(wannio, wformato);

            }


        });

        $('#concepto').change(function () {
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());
            if (xannio != '' && xformato != '' && xconcepto != '') {
                MostrarTodasDefiniconesConstantes(xannio, xformato, xconcepto);
                MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
                console.log("AÑO " + xannio + " Formato" + xformato + " Concepto" + xconcepto + "  de CHANGE Concepto")
                console.log("paso por cambio del cocepto")
            }


        });

        function buscarFormatoParaExcel(wannio) {
            $.ajax({
                url: '/medmagconstantes/buscarFormatoGeneExcel',
                data: {
                    wannio,
                },
                type: "post",
                cache: false,
                success: function (data) {
                    var option = "<option value=''>Seleccione</option>";
                    for (var j = 0; j < data.length; j++) {
                        option += ' <option value="' + data[j].id + '">' + data[j].nombre + '</option>'
                    }
                    $('#excelformato').empty();
                    $('#excelformato').append(option);
                },
                complete: function (data) {

                }
            })
        }

        function buscarConceptoParaExcel(wannio, wformato) {

            $.ajax({
                url: '/medmagconstantes/buscarConceptoGeneExcel',
                data: {
                    wannio,
                    wformato,
                },
                type: "post",
                cache: false,
                success: function (data) {
                    var option = "";
                    $('#excelconcepto').append(option).multiselect('destroy');
                    for (var k = 0; k < data.length; k++) {
                        option += ' <option value="' + data[k].id + '">' + data[k].nombre + '</option>'
                        console.log(" trae data " + data[k].id + "   " + data[k].nombre);

                    }
                    $('#excelconcepto').empty();
                    $('#excelconcepto').append(option).multiselect('refresh');

                },
                complete: function (data) {

                }
            })
        }

        function BuscarFormatosExcel(wannio, wformato) {
            if (wannio == '') { wannio = 0; }
            if (wformato == '') { wformato = 0; }
            //Ajustar
            //$("#panelDefinicionSobreBaseDatos").show();
            //$("#tablaDetallesDefinicionesSobreBaseDatos").dataTable().fnDestroy();
            //$('#tablaDetallesDefinicionesSobreBaseDatos').find('tbody').empty();

            //$.ajax(
            //    {
            //        url: '/medmagconstantes/BuscarDefDB',
            //        data:
            //            {
            //                xannio,
            //            },
            //        type: "post",
            //        cache: false,
            //        success: function (data) {
            //            if (data != 0) {
            //                for (var i = 0; i < data.length ; i++) {
            //                    $('#tablaDetallesDefinicionesSobreBaseDatos')
            //                       .find('tbody')
            //                       .append('<tr><td align="center"><input type="hidden" align="right" id="annio' + data[i].ano + '" value="' + data[i].ano + '">' + data[i].ano
            //                       + '</td><td align="center"><input type="hidden" id="formato' + data[i].formato + '" value="' + data[i].formato + '">' + data[i].formato
            //                       + '</td><td align="center"><input type="hidden" id="concepto' + data[i].concepto + '" value="' + data[i].concepto + '">' + data[i].concepto

            //                       + '</td><td align="right"><input type="hidden" align="right" id="val1'
            //                       + data[i].val1 + '" value="' + data[i].val1 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val1 + ',1,' + data[i].id + ',' + data[i].val1 + ')">&nbsp;'
            //                       + (data[i].val1 == "1" ? 'No' : (data[i].val1 == "2" ? 'M' : (data[i].val1 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="1" name="OptValor1" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val1
            //                       + ');"><option ' + (data[i].val1 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val1 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val1 == "3" ? 'selected' : '')

            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" align="right" id="val2'
            //                       + data[i].val2 + '" value="' + data[i].val2 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val2 + ',2,' + data[i].id + ',' + data[i].val2 + ')">&nbsp;'
            //                       + (data[i].val2 == "1" ? 'No' : (data[i].val2 == "2" ? 'M' : (data[i].val2 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="2" name="OptValor2" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val2
            //                       + ');"><option ' + (data[i].val2 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val2 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val2 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" align="right" id="val3'

            //                       + data[i].val3 + '" value="' + data[i].val3 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val3 + ',3,' + data[i].id + ',' + data[i].val3 + ')">&nbsp;'
            //                       + (data[i].val3 == "1" ? 'No' : (data[i].val3 == "2" ? 'M' : (data[i].val3 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="3" name="OptValor3" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val3
            //                       + ');"><option ' + (data[i].val3 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val3 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val3 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val4'

            //                       + data[i].val4 + '" value="' + data[i].val4 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val4 + ',4,' + data[i].id + ',' + data[i].val4 + ')">&nbsp;'
            //                       + (data[i].val4 == "1" ? 'No' : (data[i].val4 == "2" ? 'M' : (data[i].val4 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="4" name="OptValor4" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val4
            //                       + ');"><option ' + (data[i].val4 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val4 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val4 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val5'

            //                       + data[i].val5 + '" value="' + data[i].val5 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val5 + ',5,' + data[i].id + ',' + data[i].val5 + ')">&nbsp;'
            //                       + (data[i].val5 == "1" ? 'No' : (data[i].val5 == "2" ? 'M' : (data[i].val5 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="5" name="OptValor5" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val5
            //                       + ');"><option ' + (data[i].val5 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val5 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val5 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val6'

            //                       + data[i].val6 + '" value="' + data[i].val6 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val6 + ',6,' + data[i].id + ',' + data[i].val6 + ')">&nbsp;'
            //                       + (data[i].val6 == "1" ? 'No' : (data[i].val6 == "2" ? 'M' : (data[i].val6 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="6" name="OptValor6" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val6
            //                       + ');"><option ' + (data[i].val6 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val6 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val6 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val7'

            //                       + data[i].val7 + '" value="' + data[i].val7 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val7 + ',7,' + data[i].id + ',' + data[i].val7 + ')">&nbsp;'
            //                       + (data[i].val7 == "1" ? 'No' : (data[i].val7 == "2" ? 'M' : (data[i].val7 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="7" name="OptValor7" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val7
            //                       + ');"><option ' + (data[i].val7 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val7 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val7 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val8'

            //                       + data[i].val8 + '" value="' + data[i].val8 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val8 + ',8,' + data[i].id + ',' + data[i].val8 + ')">&nbsp;'
            //                       + (data[i].val8 == "1" ? 'No' : (data[i].val8 == "2" ? 'M' : (data[i].val8 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="8" name="OptValor8" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val8
            //                       + ');"><option ' + (data[i].val8 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val8 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val8 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val9'

            //                       + data[i].val9 + '" value="' + data[i].val9 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val9 + ',9,' + data[i].id + ',' + data[i].val9 + ')">&nbsp;'
            //                       + (data[i].val9 == "1" ? 'No' : (data[i].val9 == "2" ? 'M' : (data[i].val9 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="9" name="OptValor9" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val9
            //                       + ');"><option ' + (data[i].val9 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val9 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val9 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val10'

            //                       + data[i].val0 + '" value="' + data[i].val0 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val10 + ',10,' + data[i].id + ',' + data[i].val10 + ')">&nbsp;' + (data[i].val10 == "1" ? 'No' : (data[i].val10 == "2" ? 'M' : (data[i].val10 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="10" name="OptValor10" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val10
            //                       + ');"><option ' + (data[i].val10 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val10 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val10 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val11'

            //                       + data[i].val11 + '" value="' + data[i].val11 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val11 + ',11,' + data[i].id + ',' + data[i].val11 + ')">&nbsp;'
            //                       + (data[i].val11 == "1" ? 'No' : (data[i].val11 == "2" ? 'M' : (data[i].val11 == "3" ? 'D' : '')))
            //                       + '&nbsp;</button>&nbsp;<select id="11" name="OptValor11" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val11
            //                       + ');"><option ' + (data[i].val11 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val11 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val11 == "3" ? 'selected' : '')
            //                       + ' value="3">D</option></select></td><td align="center"><button class="btn btn-danger btn-xs" onclick="EliminarCabeceraDefinicion('
            //                       + data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');
            //                    //+ '<select id="11" name="OptValor11" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val11 + ');"><option ' + (data[i].val11 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val11 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val11 == "3" ? 'selected' : '') + ' value="3">D</option></select></td><td align="center"><button class="btn btn-primary btn-xs" onclick="EditDefinicion('
            //                    //  + data[i].id + ')"><i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;</button>&nbsp;<button class="btn btn-danger btn-xs" onclick="EliminarCabeceraDefinicion('
            //                    //  + data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');

            //                    // <button class="btn btn-primary btn-xs" onclick="EditDefinicion(' + data[i].id + ')"><i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;</button>&nbsp;


            //                }
            //            }
            //        },
            //        complete: function (data) {
            //            $('#tablaDetallesDefinicionesSobreBaseDatos').dataTable({
            //                //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
            //                dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
            //                "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
            //                buttons: [
            //                { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
            //                { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
            //                //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
            //                ]
            //            });

            //        }
            //    });
            //onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ');"
            //+ '<select id="1" name="OptValor1" onChange="' + (data[i].val1 == "2" ? 'LlamarMovi(this.value,this.id,' + data[i].id + ');' : '"' + (data[i].val1 == "3" ? 'LlamarDocu(this.value,this.id,' + data[i].id + ');' : ' ') + ';"') + ';" ><option ' + (data[i].val1 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val1 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val1 == "3" ? 'selected' : '') + ' value="3">D</option></select></td><td align="center"><input type="hidden" id="val2'
        }


        /// Acciones al cambiar contenido de campos principales fin

        /// se ejecuta del boton del panel Base de Datos
        $('#btnAgregarDB').click(function () {

            $("#annio").prop('required', true);


            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());

            var xval = '1'; // importante este dato para inicializar el registro de encabezado

            if (xannio == '' || $('#formato').val() == '' || $('#concepto').val() == '') {

                //$('#mensaje_error').text('Los campos marcados con (*) son obligatorios');
                //$('#mensaje_error').show();
                ////$('#alertAgregarConstantes').show();
                //setTimeout(function () {
                //    $("#alertAgregarConstantes").fadeOut(1500);
                //}, 3000);
                swal("Alerta Información!", "Existe algun campo sin al información requerida  !", "success");
            }
            else {

                event.preventDefault();

                $.ajax
                   (
                    {
                        url: '/medmagconstantes/AgregarDefBD',
                        type: 'POST',
                        data:
                             {
                                 idanio: xannio,
                                 idformato: xformato,
                                 idconcepto: xconcepto,
                                 val1: xval,
                                 val2: xval,
                                 val3: xval,
                                 val4: xval,
                                 val5: xval,
                                 val6: xval,
                                 val7: xval,
                                 val8: xval,
                                 val9: xval,
                                 val10: xval,
                                 val11: xval,
                             },
                        beforeSend: function (objeto) {
                            $('#mensaje_enviando').show();
                            $('#cuerpo_mensaje_enviando').html('<i class="fa fa-spinner text-center" aria-hidden="true" ></i> Enviando datos...')
                            setTimeout(function () {
                                $("#mensaje_enviando").fadeOut(1500);
                            }, 3000);

                        },
                    }).done(function (result) {
                        //  $('#mensaje_enviando').hide();

                        if (result == 1) {

                            $("#mensaje").html('<i class="fa fa-check" aria-hidden="true" ></i> Se inicializo la Definicion de Movimientos y Cuentas con exito');
                            $("#mensaje").show();
                            //   $('#mensaje_enviando').hiden();

                            setTimeout(function () {
                                $("#mensaje").fadeOut(1500);
                            }, 3000);

                            console.log("paso por mostrar tabla de definicion de basa de datos ");
                            MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);

                        } else {
                            swal("Información!", "Ya Existe una cabecera con esos datos !", "success");
                            $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en inicializacion de   Definicion de Movimientos y Cuentas ');
                            $("#mensaje_error").show();
                        }
                    });
                //} else {
                //    $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en guardar inicializacion de Definicion de Moviminetos y Cuentas.');
                //    $("#mensaje_error").show();
                //}
                console.log("Paso por btnAgregarDB");
                //$("#panelDefinicionSobreBaseDatos").show();
                // $('#modalDefinicionValoresDB').modal('show');
            }

        });
        /// Submit medios Moviminetos y cuentas de Base de Datos Modal  : modalDefinicionMoviminetoCuentas
        $('#submitAgregarMovCts').click(function (e) {
            $("#annio").prop('required', true);
            debugger;
            var xxidmedios = parseInt($("#id_encabezado").val());
            var xxtipomovimiento = parseInt($('input:radio[name=tip]:checked').val());
            var xxcuenta = parseInt($("#cntpuc_id").val());     /// valor seleccionado del DropDownList
            var xxoperacion = $('#OptValorOper').val();
            var xxidtipodoc = parseInt($("#tpdoc_id").val());
            var xxidvalor = parseInt($("#id_val").val());
            var xxTipoDato = parseInt($("#id_OptionTipMov").val());

            if (isNaN(xxidtipodoc) == true) { xxidtipodoc = 0; }

            console.log(" submitAgregarMovCts idmedios: " + xxidmedios
                + "  tipo mov : " + xxtipomovimiento
                + "  Cuenta   : " + xxcuenta
                + "  Operacion: " + xxoperacion
                + "  Tipo Doc : " + xxidtipodoc
                + "  idValor  : " + xxidvalor
                + "  TipoDato : " + xxTipoDato + " ");
            //if ($('#id_encabezado').val() == '' || $('#cntpuc_id').val() == '' || $('#OptValorOper').val() == '' || $('#tpdoc_id').val() == '' || $('#id_val').val() == '')
            if (xxidmedios == '' || xxtipomovimiento == '' || xxcuenta == '' || xxoperacion == '' || xxidvalor == '' || xxTipoDato == '') {
                //$('#mensajeAgregarConstantes').text('Los campos marcados con (*) son obligatorios');
                $('#alertAgregarConstantes').show();
                setTimeout(function () {
                    $("#alertAgregarConstantes").fadeOut(1500);
                }, 3000);
                console.log("  Hay algun campo sin datos para el registro de medios_novtos");
                swal("Alerta Información!", "Existe algun campo sin al información requerida  !", "success");
            }
            else {
                var form = $('#defMovCtaBD');
                var valid = this.form.checkValidity();
                if (valid) {
                    event.preventDefault();
                    $.ajax
                       (
                        {
                            url: '/medmagconstantes/AgregarDefMovCtaBD',
                            type: 'POST',
                            data:
                                 {
                                     idmedios: xxidmedios,
                                     tipomovimiento: xxtipomovimiento,
                                     cuenta: xxcuenta,
                                     operacion: xxoperacion,
                                     idtipodoc: xxidtipodoc,
                                     idvalor: xxidvalor,
                                     tipodato: xxTipoDato,
                                 },
                            beforeSend: function (objeto) {
                                $('#mensaje_enviando').show();
                                $('#cuerpo_mensaje_enviando').html('<i class="fa fa-spinner text-center" aria-hidden="true" ></i> Enviando datos...')
                                setTimeout(function () {
                                    $("#mensaje_enviando").fadeOut(1500);
                                }, 3000);
                            },
                        }).done(function (result) {
                            if (result == 1) {
                                $("#mensaje").html('<i class="fa fa-check" aria-hidden="true" ></i> Definicion de Movimientos y Cuentas agregado con exito');
                                $("#mensaje").show();
                                setTimeout(function () {
                                    $("#mensaje").fadeOut(1500);
                                }, 3000);

                                //   xxidmedios = " ";
                                xxtipomovimiento = " ";
                                xxcuenta = " ";
                                xxoperacion = " ";
                                xxidtipodoc = " ";
                                //     xxidvalor = " ";
                                //     xxTipoDato = " ";
                                $('input[name="tip"]').prop('checked', false);

                                // $('input:radio[name=tip]:checked').val('');
                                $("#cntpuc_id").val('');     /// valor seleccionado del DropDownList
                                // $('#OptValorOper').val('');
                                $("#tpdoc_id").val('');

                                // $("#id_OptionTipMov").val('');

                                $("#cntpuc_id").val($("#cntpuc_id option:first").val()).select2();
                                $("#tpdoc_id").val($("#tpdoc_id option:first").val()).select2();


                                MostrarTodasDefMovCtaDB(xxidmedios, xxidvalor, xxTipoDato);
                            }
                            else {
                                swal("Alerta Información!", "Ya Existe la definición que intenta ingresar  !", "success");
                                $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en guardar Definicion de Moviminetos y Cuentas');
                                $("#mensaje_error").show();
                            }
                        });
                }
                else {
                    swal("Alerta Error!", "Error en guardar Definicion Moviminetos y Cuentas !", "success");
                    $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en guardar Definicion Moviminetos y Cuentas.');
                    $("#mensaje_error").show();
                }
            }
        });

        /// Submit medios Moviminetos y cuentas de Base de Datos Modal  : modalDefinicionMoviminetoCuentas
        $('#submitAgregarDocument').click(function (e) {
            $("#annio").prop('required', true);


            var Widmedios = parseInt($("#id_encabezado").val());
            var Wtipomovimiento = parseInt($("#id").val());     /// valor seleccionado del DropDownList de  tabla mediostipovalor
            // var Wcuenta = parseInt($("#tpdoc_id").val());     /// valor seleccionado del DropDownList
            var Woperacion = $('#OptValorOperD').val();
            var Widtipodoc = parseInt($("#tpdoc_id2").val());  /// valor seleccionado del DropDownList de tabla tp_doc_registros
            var Widvalor = parseInt($("#id_val").val());
            var WTipoDato = parseInt($("#id_OptionTipMov").val());

            console.log(" submitAgregarDocument idmedios: " + Widmedios
                + "  tipo mov : " + Wtipomovimiento
                //+ "  Cuenta   : " + xxcuenta
                + "  Operacion: " + Woperacion
                + "  Tipo Doc : " + Widtipodoc
                + "  idValor  : " + Widvalor
                + "  TipoDato : " + WTipoDato + " ");
            //if ($('#id_encabezado').val() == '' || $('#cntpuc_id').val() == '' || $('#OptValorOper').val() == '' || $('#tpdoc_id').val() == '' || $('#id_val').val() == '')
            if (Widmedios == '' || Wtipomovimiento == '' || Woperacion == '' || Widtipodoc == '' || Widvalor == '' || WTipoDato == '') {
                //$('#mensajeAgregarConstantes').text('Los campos marcados con (*) son obligatorios');
                $('#alertAgregarConstantes').show();
                setTimeout(function () {
                    $("#alertAgregarConstantes").fadeOut(1500);
                }, 3000);
                console.log("  Hay algun campo sin datos para el registro de medios_novtos");
                swal("Alerta Información!", "Existe algun campo sin al información requerida  !", "success");
            }
            else {
                var form = $('#defDocuBD');
                var valid = this.form.checkValidity();
                if (valid) {
                    event.preventDefault();
                    $.ajax
                       (
                        {
                            url: '/medmagconstantes/AgregarDocumentosBD',
                            type: 'POST',
                            data:
                                 {
                                     idmedios: Widmedios,
                                     tipomovimiento: Wtipomovimiento,
                                     //cuenta: xxcuenta,
                                     operacion: Woperacion,
                                     idtipodoc: Widtipodoc,
                                     idvalor: Widvalor,
                                     tipodato: WTipoDato,
                                 },
                            beforeSend: function (objeto) {
                                $('#mensaje_enviando').show();
                                $('#cuerpo_mensaje_enviando').html('<i class="fa fa-spinner text-center" aria-hidden="true" ></i> Enviando datos...')
                                setTimeout(function () {
                                    $("#mensaje_enviando").fadeOut(1500);
                                }, 3000);
                            },
                        }).done(function (result) {
                            if (result == 1) {
                                $("#mensaje").html('<i class="fa fa-check" aria-hidden="true" ></i> Definicion de Moviminetos y Cuentas agregado con exito');
                                $("#mensaje").show();
                                setTimeout(function () {
                                    $("#mensaje").fadeOut(1500);
                                }, 3000);


                                $("#tpdoc_id2").val($("#tpdoc_id2 option:first").val()).select2();
                                $("#id").val($("#id option:first").val()).select2();

                                MostrarTodasDefDocumentosDB(Widmedios, Widvalor, WTipoDato);
                            }
                            else {
                                swal("Información!", "El Documento ya se encuentra registrado  !", "success");
                                $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en guardar Definicion de Moviminetos y Cuentas');
                                $("#mensaje_error").show();
                            }
                        });
                }
                else {
                    swal("Error!", "Error al guardar Definición de Movimientos y Cuentas  !", "success");
                    $("#mensaje_error").html('<i class="fa fa-times" aria-hidden="true" ></i> Error en guardar Definicion Moviminetos y Cuentas.');
                    $("#mensaje_error").show();
                }
            }
        });
        // Mostrar todos los Encabezados de las Definiciones de Movimientos y Cuentas de la Base de Datos
        function MostrarTodasDefiniconesDB(xannio, xformato, xconcepto) {
            if (xannio == '') { xannio = 0; }
            if (xformato == '') { xformato = 0; }
            if (xconcepto == '') { xconcepto = 0; }
            console.log("dentro de  mostrar todas las definiciones de bd");


            $("#panelDefinicionSobreBaseDatos").show();
            $("#tablaDetallesDefinicionesSobreBaseDatos").dataTable().fnDestroy();
            $('#tablaDetallesDefinicionesSobreBaseDatos').find('tbody').empty();

            $.ajax(
                {
                    url: '/medmagconstantes/BuscarDefDB',
                    data:
                        {
                            xannio,
                            xformato,
                            xconcepto
                        },
                    type: "post",
                    cache: false,
                    success: function (data) {
                        if (data != 0) {
                            for (var i = 0; i < data.length ; i++) {
                                $('#tablaDetallesDefinicionesSobreBaseDatos')
                                   .find('tbody')
                                   .append('<tr><td align="center"><input type="hidden" id="annio' + data[i].ano + '" value="' + data[i].ano + '">' + data[i].ano
                                   + '</td><td align="center"><input type="hidden" id="formato' + data[i].formato + '" value="' + data[i].formato + '">' + data[i].formato
                                   + '</td><td align="center"><input type="hidden" id="concepto' + data[i].concepto + '" value="' + data[i].concepto + '">' + data[i].concepto

                                   + '</td><td align="right"><input type="hidden" id="val1'
                                   + data[i].val1 + '" value="' + data[i].val1 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val1 + ',1,' + data[i].id + ',' + data[i].val1 + ')">&nbsp;'
                                   + (data[i].val1 == "1" ? 'No' : (data[i].val1 == "2" ? 'M' : (data[i].val1 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="1" name="OptValor1" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val1
                                   + ');"><option ' + (data[i].val1 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val1 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val1 == "3" ? 'selected' : '')

                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val2'
                                   + data[i].val2 + '" value="' + data[i].val2 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val2 + ',2,' + data[i].id + ',' + data[i].val2 + ')">&nbsp;'
                                   + (data[i].val2 == "1" ? 'No' : (data[i].val2 == "2" ? 'M' : (data[i].val2 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="2" name="OptValor2" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val2
                                   + ');"><option ' + (data[i].val2 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val2 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val2 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val3'

                                   + data[i].val3 + '" value="' + data[i].val3 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val3 + ',3,' + data[i].id + ',' + data[i].val3 + ')">&nbsp;'
                                   + (data[i].val3 == "1" ? 'No' : (data[i].val3 == "2" ? 'M' : (data[i].val3 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="3" name="OptValor3" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val3
                                   + ');"><option ' + (data[i].val3 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val3 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val3 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val4'

                                   + data[i].val4 + '" value="' + data[i].val4 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val4 + ',4,' + data[i].id + ',' + data[i].val4 + ')">&nbsp;'
                                   + (data[i].val4 == "1" ? 'No' : (data[i].val4 == "2" ? 'M' : (data[i].val4 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="4" name="OptValor4" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val4
                                   + ');"><option ' + (data[i].val4 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val4 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val4 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val5'

                                   + data[i].val5 + '" value="' + data[i].val5 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val5 + ',5,' + data[i].id + ',' + data[i].val5 + ')">&nbsp;'
                                   + (data[i].val5 == "1" ? 'No' : (data[i].val5 == "2" ? 'M' : (data[i].val5 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="5" name="OptValor5" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val5
                                   + ');"><option ' + (data[i].val5 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val5 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val5 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val6'

                                   + data[i].val6 + '" value="' + data[i].val6 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val6 + ',6,' + data[i].id + ',' + data[i].val6 + ')">&nbsp;'
                                   + (data[i].val6 == "1" ? 'No' : (data[i].val6 == "2" ? 'M' : (data[i].val6 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="6" name="OptValor6" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val6
                                   + ');"><option ' + (data[i].val6 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val6 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val6 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val7'

                                   + data[i].val7 + '" value="' + data[i].val7 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val7 + ',7,' + data[i].id + ',' + data[i].val7 + ')">&nbsp;'
                                   + (data[i].val7 == "1" ? 'No' : (data[i].val7 == "2" ? 'M' : (data[i].val7 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="7" name="OptValor7" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val7
                                   + ');"><option ' + (data[i].val7 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val7 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val7 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val8'

                                   + data[i].val8 + '" value="' + data[i].val8 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val8 + ',8,' + data[i].id + ',' + data[i].val8 + ')">&nbsp;'
                                   + (data[i].val8 == "1" ? 'No' : (data[i].val8 == "2" ? 'M' : (data[i].val8 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="8" name="OptValor8" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val8
                                   + ');"><option ' + (data[i].val8 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val8 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val8 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val9'

                                   + data[i].val9 + '" value="' + data[i].val9 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val9 + ',9,' + data[i].id + ',' + data[i].val9 + ')">&nbsp;'
                                   + (data[i].val9 == "1" ? 'No' : (data[i].val9 == "2" ? 'M' : (data[i].val9 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="9" name="OptValor9" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val9
                                   + ');"><option ' + (data[i].val9 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val9 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val9 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val10'

                                   + data[i].val0 + '" value="' + data[i].val0 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val10 + ',10,' + data[i].id + ',' + data[i].val10 + ')">&nbsp;' + (data[i].val10 == "1" ? 'No' : (data[i].val10 == "2" ? 'M' : (data[i].val10 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="10" name="OptValor10" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val10
                                   + ');"><option ' + (data[i].val10 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val10 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val10 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="right"><input type="hidden" id="val11'

                                   + data[i].val11 + '" value="' + data[i].val11 + '"><button class="btn btn-primary btn-xs" onclick="Llamar(' + data[i].val11 + ',11,' + data[i].id + ',' + data[i].val11 + ')">&nbsp;'
                                   + (data[i].val11 == "1" ? 'No' : (data[i].val11 == "2" ? 'M' : (data[i].val11 == "3" ? 'D' : '')))
                                   + '&nbsp;</button>&nbsp;<select id="11" name="OptValor11" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val11
                                   + ');"><option ' + (data[i].val11 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val11 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val11 == "3" ? 'selected' : '')
                                   + ' value="3">D</option></select></td><td align="center"><button class="btn btn-danger btn-xs" onclick="EliminarCabeceraDefinicion('
                                   + data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');
                                //+ '<select id="11" name="OptValor11" onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ',' + data[i].val11 + ');"><option ' + (data[i].val11 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val11 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val11 == "3" ? 'selected' : '') + ' value="3">D</option></select></td><td align="center"><button class="btn btn-primary btn-xs" onclick="EditDefinicion('
                                //  + data[i].id + ')"><i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;</button>&nbsp;<button class="btn btn-danger btn-xs" onclick="EliminarCabeceraDefinicion('
                                //  + data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');

                                // <button class="btn btn-primary btn-xs" onclick="EditDefinicion(' + data[i].id + ')"><i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;</button>&nbsp;


                            }
                        }
                    },
                    complete: function (data) {
                        $('#tablaDetallesDefinicionesSobreBaseDatos').dataTable({
                            //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
                            dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
                            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                            buttons: [
                            { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
                            { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
                            //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
                            ]
                        });

                    }
                });
            //onChange="SeleccionarModalDB(this.value,this.id,' + data[i].id + ');"
            //+ '<select id="1" name="OptValor1" onChange="' + (data[i].val1 == "2" ? 'LlamarMovi(this.value,this.id,' + data[i].id + ');' : '"' + (data[i].val1 == "3" ? 'LlamarDocu(this.value,this.id,' + data[i].id + ');' : ' ') + ';"') + ';" ><option ' + (data[i].val1 == "1" ? 'selected' : '') + ' value="1">No</option><option ' + (data[i].val1 == "2" ? 'selected' : '') + ' value="2">M</option><option ' + (data[i].val1 == "3" ? 'selected' : '') + ' value="3">D</option></select></td><td align="center"><input type="hidden" id="val2'
        }
        // Mostrar todos las Definiciones de Movimientos y Cuentas de un Valor de la Base de Datos
        function MostrarTodasDefMovCtaDB(xidmedios, xidvalor, xxTipoDato) {
            if (xidmedios == '') { xidmedios = 0; }
            if (xidvalor == '') { xidvalor = 0; }
            if (xxTipoDato == '') { xxTipoDato = 0; }


            console.log("Entrando a mostrar todas las definiciones de Movimientos y cuentas de un Valor en la BD");


            $("#definicionMovimientosCuentas").show();
            $("#tablaDetallesDefinicionesMovimientosCuentas").dataTable().fnDestroy();
            $('#tablaDetallesDefinicionesMovimientosCuentas').find('tbody').empty();

            $.ajax(
                {
                    url: '/medmagconstantes/BuscarDefMovCtaDBxx',
                    data:
                        {
                            xidmedios,
                            xidvalor,
                            xxTipoDato,
                        },
                    type: "post",
                    cache: false,
                    success: function (data) {
                        if (data != 0) {
                            for (var i = 0; i < data.length ; i++) {
                                $('#tablaDetallesDefinicionesMovimientosCuentas')
                                   .find('tbody')
                                   .append('<tr><td align="center"><input type="hidden" id="tipo' + data[i].WtipoCod + '" value="' + data[i].WtipoCod + '">' + data[i].WtipoCod
                                   + '</td><td align="center"><input type="hidden" id="descr' + data[i].WtipoDes + '" value="' + data[i].WtipoDes + '">' + data[i].WtipoDes
                                   + '</td><td align="center"><input type="hidden" id="idCta' + data[i].WiCuenta + '" value="' + data[i].WiCuenta + '">' + data[i].WiCuenta
                                   + '</td><td align="center"><input type="hidden" id="dCuen' + data[i].WdCuenta + '" value="' + data[i].WdCuenta + '">' + data[i].WdCuenta
                                   + '</td><td align="center"><input type="hidden" id="opera' + data[i].Woperaci + '" value="' + data[i].Woperaci + '">' + data[i].Woperaci
                                   + '</td><td align="center"><input type="hidden" id="que' + data[i].WQue + '" value="' + data[i].WQue + '">' + data[i].WQue
                                   + '</td><td align="center"><button class="btn btn-danger btn-xs" onclick="EliminarDefinicionMovCtaBD('
                                   + data[i].id + ')"><i class="fa fa-trash"></i></button></td></tr>');
                            }
                        }
                    },
                    complete: function (data) {
                        $('#tablaDetallesDefinicionesMovimientosCuentas').dataTable({
                            //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
                            dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
                            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                            buttons: [
                            { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
                            { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
                            //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
                            ]
                        });

                    }
                });

            console.log("Saliendo de mostrar todas las definiciones de Movimientos y cuentas de un Valor en la BD");
            //+ '</td><td width="25%" align="center"><button class="btn btn-danger btn-xs" onclick="EliminarDefinicionMovCtaBD('
        }
        // Mostrar todos las Definiciones de Documentos de un Valor de la Base de Datos
        function MostrarTodasDefDocumentosDB(xidmedios, xidvalor, xxTipoDato) {
            if (xidmedios == '') { xidmedios = 0; }
            if (xidvalor == '') { xidvalor = 0; }
            if (xxTipoDato == '') { xxTipoDato = 0; }


            console.log("Entrando a mostrar todas las definiciones de Documentos de un Valor en la BD");


            $("#definicionDocument").show();
            $("#tablaDetallesDefinicionesDocument").dataTable().fnDestroy();
            $('#tablaDetallesDefinicionesDocument').find('tbody').empty();

            $.ajax(
                {
                    url: '/medmagconstantes/BuscarDefDocumentosDB',
                    data:
                        {
                            xidmedios,
                            xidvalor,
                            xxTipoDato,
                        },
                    type: "post",
                    cache: false,
                    success: function (data) {
                        if (data != 0) {
                            for (var i = 0; i < data.length ; i++) {
                                $('#tablaDetallesDefinicionesDocument')
                                   .find('tbody')
                                   .append('<tr><td align="center"><input type="hidden" id="tipo' + data[i].wtipo + '" value="' + data[i].wtipo + '">' + data[i].wtipo
                                   + '</td><td align="center"><input type="hidden" id="campo' + data[i].wcampo + '" value="' + data[i].wcampo + '">' + data[i].wcampo
                                   + '</td><td align="center"><input type="hidden" id="operacion' + data[i].woperacion + '" value="' + data[i].woperacion + '">' + data[i].woperacion
                                   //+ '</td><td align="center"><input type="hidden" id="dCuen' + data[i].WdCuenta + '" value="' + data[i].WdCuenta + '">' + data[i].WdCuenta
                                   //+ '</td><td align="center"><input type="hidden" id="opera' + data[i].Woperaci + '" value="' + data[i].Woperaci + '">' + data[i].Woperaci
                                   //+ '</td><td align="center"><input type="hidden" id="que' + data[i].WQue + '" value="' + data[i].WQue + '">' + data[i].WQue
                                   + '</td><td align="center"><button class="btn btn-danger btn-xs" onclick="EliminarDefinicionDocumentoBD('
                                   + data[i].wid + ')"><i class="fa fa-trash"></i></button></td></tr>');
                            }
                        }
                    },
                    complete: function (data) {
                        $('#tablaDetallesDefinicionesDocument').dataTable({
                            //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
                            dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
                            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                            buttons: [
                            { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
                            { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
                            //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
                            ]
                        });

                    }
                });
            console.log("Saliendo de  mostrar todas las definiciones de Documentos de un Valor en la BD");
        }

        //************funciones Globales Generales  inicio

        function quitCommas(nStr) {
            nStr.toString();
            //console.log(nStr);
            var s = nStr.replace(/\./g, "");
            return s;
        }


        function addCommas(nStr) {
            nStr += '';
            x = nStr.split('.');
            x1 = x[0];
            x2 = x.length > 1 ? '.' + x[1] : '';
            var rgx = /(\d+)(\d{3})/;
            while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + '.' + '$2');
            }
            return x1 + x2;
        }

        var numero_miles = "";
        function formatNumber(n) {
            n = String(n).replace(/\D/g, "");
            return n === '' ? n : String(n).replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        function miles(id) {
            numero_miles = formatNumber($('#' + id + '').val());
            $('#' + id + '').val(numero_miles);
        }
        //************funciones Globales Generales fin


        // Seleccionar Modal de Definicion en la BD
        function SeleccionarModalDB(id, xidValor, xidmedios, xtipodato) {
            console.log("Esta en SeleccionarModalDB !!! Modal del onChange !!");
            console.log("Esta en SeleccionarModalDB !!! Modal del onChange !! id: " + id + " idValor:  " + xidValor + "  idTablaMedios: " + xidmedios + " Seleccion NO/M/D: " + xtipodato + "");
            var xdef = parseInt(id);
            var xVal = parseInt(xidValor);
            var xidMed = xidmedios;

            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());
            var xxTipoDato = parseInt($("#id_OptionTipMov").val());

            if (xdef == 1) {
                console.log("Esta en SeleccionarModalDB !!! En seleccion NO  !!");
                ActualizarCabeceraDefinicion(xdef, xVal, xidMed)
            }
            if (xdef == 2) {
                console.log("Esta en SeleccionarModalDB !!! En seleccion Movimientos y Cuentas !!");
                $("#id_encabezado").val(xidMed);
                $("#id_val").val(xVal);
                $("#id_OptionTipMov").val(xdef);
                ActualizarCabeceraDefinicion(xdef, xVal, xidMed)
                console.log("SeleccionarModalDB con valor 2 Moviminetos Lo que lleva para cargarla tabla  idmedios: " + xidMed + " Campo Valo: " + xVal + " Tipo Docuemnto del combo: " + xtipodato + " ");
                MostrarTodasDefMovCtaDB(xidMed, xVal, xtipodato);
                $('#modalDefinicionMoviminetoCuentas').modal('show');
            }
            if (xdef == 3) {
                console.log("Esta en SeleccionarModalDB !!! En seleccion Documentos !!");
                $("#id_encabezado").val(xidMed);
                $("#id_val").val(xVal);
                $("#id_OptionTipMov").val(xdef);
                ActualizarCabeceraDefinicion(xdef, xVal, xidMed)
                console.log("SeleccionarModalDB con valor 3 Documentos Lo que lleva para cargarla tabla  idmedios: " + xidMed + " Campo Valo: " + xVal + " Tipo Docuemnto del combo: " + xtipodato + " ");
                MostrarTodasDefDocumentosDB(xidMed, xVal, xtipodato);
                $('#modalDefinicionDocumentos').modal('show');
            }
        }
        // Seleccionar Modal de Definicion en la BD Directo
        function Llamar(id, xidValor, xidmedios, xtipodato) {
            console.log("Esta en LLamar !! id: " + id + " idValor:  " + xidValor + "  idTablaMedios: " + xidmedios + " Seleccion NO/M/D: " + xtipodato + "");

            var xdef = parseInt(id);
            var xVal = parseInt(xidValor);
            var xidMed = xidmedios;

            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());
            var xxTipoDato = parseInt($("#id_OptionTipMov").val());

            if (xdef == 1) {
                console.log("Esta en LLamar !!! En seleccion NO  !!");

            }
            if (xdef == 2) {
                console.log("Esta en LLamar !!! En seleccion Movimientos y Cuentas !!");
                $("#id_encabezado").val(xidMed);
                $("#id_val").val(xVal);
                $("#id_OptionTipMov").val(xdef);

                console.log("LLamar con valor 2 Moviminetos Lo que lleva para cargarla tabla  idmedios: " + xidMed + " Campo Valo: " + xVal + " Tipo Docuemnto del combo: " + xtipodato + " ");
                MostrarTodasDefMovCtaDB(xidMed, xVal, xtipodato);
                $('#modalDefinicionMoviminetoCuentas').modal('show');
            }
            if (xdef == 3) {
                console.log("Esta en LLamar !!! En seleccion Documentos !!");
                $("#id_encabezado").val(xidMed);
                $("#id_val").val(xVal);
                $("#id_OptionTipMov").val(xdef);
                console.log("LLamar con valor 3 Documentos Lo que lleva para cargarla tabla  idmedios: " + xidMed + " Campo Valo: " + xVal + " Tipo Docuemnto del combo: " + xtipodato + " ");
                MostrarTodasDefDocumentosDB(xidMed, xVal, xtipodato);
                $('#modalDefinicionDocumentos').modal('show');
            }
        }

        // Eliminar Cabecera de Definicion en la BD seleccionada
        function EliminarCabeceraDefinicion(id) {
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());

            event.preventDefault();

            swal({
                title: "Estás seguro?",
                text: "Se Eliminara la Cabecera de Definicion!",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Aceptar!!',
                cancelButtonText: "Cancelar!!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
                   function (isConfirm) {
                       if (isConfirm) {

                           $.ajax({
                               url: '/medmagconstantes/eliminarDefinicionBD',
                               data: {
                                   idDetalle: id,
                               },
                               type: "post",
                               cache: false,
                               success: function (data) {
                                   if (data == true) {

                                   }
                               }
                           });

                           $.ajax({
                               url: '/medmagconstantes/eliminarCabeceraDefinicionBD',
                               data: {
                                   idDetalle: id,
                               },
                               type: "post",
                               cache: false,
                               success: function (data) {
                                   if (data == true) {
                                       swal("Eliminado!", "Se ha Eliminado la Cabecera de la Definición !", "success");
                                       MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
                                   }
                               }
                           });

                       } else {
                           swal("Cancelado", "No se Eliminado la Cabecera de Definición)", "error");
                       }
                   });



        }
        // Eliminar Definicion del Movimiento y Cuenta en la BD seleccionada
        function EliminarDefinicionMovCtaBD(id) {
            var xidMed = parseInt($("#id_encabezado").val());
            var xVal = parseInt($("#id_val").val());
            var xxTipoDato = parseInt($("#id_OptionTipMov").val());
            event.preventDefault();
            swal({
                title: "Estás seguro?",
                text: "Se Eliminara la Definición de Movimientos y Cuentas !",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Aceptar!!',
                cancelButtonText: "Cancelar!!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
            function (isConfirm) {
                if (isConfirm) {

                    $.ajax({
                        url: '/medmagconstantes/eliminarDefinicionBD',
                        data: {
                            idDetalle: id,
                        },
                        type: "post",
                        cache: false,
                        success: function (data) {
                            if (data == true) {
                                swal("Eliminado!", "Se ha Eliminado la  Definición de Movimientos y Cuentas !", "success");

                                MostrarTodasDefMovCtaDB(xidMed, xVal, xxTipoDato);
                            }
                        }
                    });

                } else {
                    swal("Cancelado", "No se Eliminado la Definición de Movimientos y Cuentas", "error");
                }
            });

        }
        // Eliminar Definicion del Documento Seleccionado
        function EliminarDefinicionDocumentoBD(id) {
            var xidMed = parseInt($("#id_encabezado").val());
            var xVal = parseInt($("#id_val").val());
            var xxTipoDato = parseInt($("#id_OptionTipMov").val());
            console.log("estamos en la funcion eliminar definicion documento ");

            event.preventDefault();

            swal({
                title: "Estás seguro?",
                text: "Se Eliminara la Definición del Documento !",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Aceptar!!',
                cancelButtonText: "Cancelar!!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
            function (isConfirm) {
                if (isConfirm) {

                    $.ajax({
                        url: '/medmagconstantes/eliminarDefDocumentoBD',
                        data: {
                            idDetalle: id,
                        },
                        type: "post",
                        cache: false,
                        success: function (data) {
                            if (data == true) {
                                swal("Eliminado!", "Se ha Eliminado la Definición del Documento!", "success");
                                MostrarTodasDefDocumentosDB(xidMed, xVal, xxTipoDato);
                            }
                        }
                    });

                } else {
                    swal("Cancelado", "No se Eliminado la Definicion del Documento ", "error");
                }
            });

            ///**********



        }

        function EditDefinicion(id) {
            //var xannio = parseInt($("#anio").val());
            var xannio = parseInt($("#anio").find("input").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());
            var xidEncabezado = id;
            $("#Vauno").value = xidEncabezado;
            $("#Vauno").val(xidEncabezado);
            $("#panelDefinicionSobreBaseDatos").show();
            $('#modalDefinicionValoresDB').modal('show');

        }
        // Actualizacion de Cabecera de Definicion de Valores de Movimientos , Cuentas y Documentos
        function ActualizarCabeceraDefinicion(id, xidValor, xidmedios) {
            var xannio = parseInt($("#anio").find("input").val());
            //var xannio = parseInt($("#anio").val());
            var xformato = parseInt($("#formato").val());
            var xconcepto = parseInt($("#concepto").val());


            var xidMed = parseInt($("#id_encabezado").val());
            var xVal = parseInt($("#id_val").val());
            var xxTipoDato = parseInt($("#id_OptionTipMov").val());


            var xidTablaMedios = parseInt(xidmedios);
            var xValorNuevo = id;
            var xValorNuevo2 = xValorNuevo.toString();
            var xPosValor = xidValor;

            console.log(" Entrando a ActualizarCabeceraDefinicion  Que Valor trae :" + xValorNuevo + " valor nuevo:" + xValorNuevo2 + " otro XidValor :" + xPosValor + "  dsdsf: " + xidTablaMedios);


            event.preventDefault();

            ///******

            swal({
                title: "Estás seguro?",
                text: "Actualizara la Cabecera para el Val" + xidValor + " ",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Aceptar!!',
                cancelButtonText: "Cancelar!!",
                closeOnConfirm: false,
                closeOnCancel: false
            },
           function (isConfirm) {
               if (isConfirm) {

                   $.ajax({
                       url: '/medmagconstantes/actualizarValorinVal',
                       data: {
                           idCabecera: xidTablaMedios,
                           idPosValor: xPosValor,
                           NuevoValor: xValorNuevo2,
                       },
                       type: "post",
                       cache: false,
                       success: function (data) {
                           if (data == true) {

                               console.log("Ya se realizo la Actualizacion");

                               swal("Actualizado!", "Se ha Actualizado el Encabezado para el Val " + xidValor + " a " + xValorNuevo2 + "!", "success");

                               MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
                               MostrarTodasDefMovCtaDB(xidMed, xVal, xxTipoDato);
                               MostrarTodasDefDocumentosDB(xidMed, xVal, xxTipoDato);
                           }
                       }
                   });  // final ajax

               } else {
                   MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
                   MostrarTodasDefMovCtaDB(xidMed, xVal, xxTipoDato);
                   MostrarTodasDefDocumentosDB(xidMed, xVal, xxTipoDato);
                   swal("Cancelado", "¡No se Actualizo el encabezado para el Val" + xidValor + " !!!", "error");
               }
           });

            console.log(" Salir de  ActualizarCabeceraDefinicion  ");
        }

        $('#btnAlertaNumeroCotizado').click(function () {
            swal({
                title: "Desea generar un plan de pago",
                text: "Cotización Generada: ",
                type: "success",
                showCancelButton: false,
                confirmButtonColor: "#62cb31",
                confirmButtonText: "Aceptar!",
                cancelButtonText: "Cancelar!",
                closeOnConfirm: true,
                closeOnCancel: false
            },
                function (isConfirm) {
                    if (isConfirm) {
                        atenderUsuario(id, true);
                        swal("Aceptado!", "", "success");
                        setTimeout(function () { }, 4000);
                        window.location.href = '@Url.Action("Ver", "cotizacion")';
                    } else {
                        swalCancelar(mensaje, id);
                    }
                });
        });

        function buscarFormato() {
            $.ajax({
                url: '/medmagconstantes/buscarFormato',
                data: {
                },
                type: "post",
                cache: false,
                success: function (data) {
                    var option = "<option value=''>Seleccione</option>";
                    for (var j = 0; j < data.length; j++) {
                        option += ' <option value="' + data[j].id + '">' + data[j].nombre + '</option>'
                    }
                    $('#formato').empty();
                    $('#formato').append(option);
                },
                complete: function (data) {

                }
            })
        }

        function buscarFormatoR() {
            $.ajax({
                url: '/medmagconstantes/buscarFormato2',
                data: {
                },
                type: "post",
                cache: false,
                success: function (data) {
                    var option = "<option value=''>Seleccione...</option>";
                    for (var j = 0; j < data.length; j++) {
                        option += ' <option value="' + data[j].id + '">' + data[j].nombre + '</option>'
                    }
                    $('#rformato').empty();
                    $('#rformato').append(option);
                },
                complete: function (data) {

                }
            })
        }

        $('#formato').change(function () {
            $.ajax({
                url: '/medmagconstantes/buscarConceptos',
                data: {
                    idFormato: $('#formato').val(),
                },
                type: "post",
                cache: false,
                success: function (data) {
                    var option = "<option value=''>Seleccione</option>";
                    for (var j = 0; j < data.length; j++) {
                        option += ' <option value="' + data[j].id + '">' + data[j].nombre + '</option>'
                    }
                    $('#concepto').empty();
                    $('#concepto').append(option);
                },
                complete: function (data) {

                }
            })
        });

        $('#rformato').change(function () {
            $.ajax({
                url: '/medmagconstantes/buscarConceptos2',
                data: {
                    idFormato: $('#rformato').val(),
                },
                type: "post",
                cache: false,
                success: function (data) {
                    var option = "";
                    $('#rconcepto').append(option).multiselect('destroy');
                    for (var k = 0; k < data.length; k++) {
                        option += ' <option value="' + data[k].id + '">' + data[k].nombre + '</option>'
                        console.log(" trae data " + data[k].id + "   " + data[k].nombre);

                    }
                    $('#rconcepto').empty();
                    //  $('#rconcepto').append(option).multiselect('destroy');
                    $('#rconcepto').append(option).multiselect("refresh");

                    //$('#rconcepto').append(option).multiselect('refresh');
                    // $("#rconcepto").append(toAppend).multiselect("refresh");
                },
                complete: function (data) {

                }
            })
        });


    </script>

}



@*function confirmDelete() {
    swal({
    title: "Are you sure?",
    text: "You will not be able to recover this imaginary file!",
    type: "warning",
    showCancelButton: true,
    confirmButtonColor: "#DD6B55",
    confirmButtonText: "Yes, delete it!",
    closeOnConfirm: false
    }, function (isConfirm) {
    if (!isConfirm) return;
    $.ajax({
    url: "scriptDelete.php",
    type: "POST",
    data: {
    id: 5
    },
    dataType: "html",
    success: function () {
    swal("Done!", "It was succesfully deleted!", "success");
    },
    error: function (xhr, ajaxOptions, thrownError) {
    swal("Error deleting!", "Please try again", "error");
    }
    });
    });
    }*@





@*<div class="col-md-12">
        <h4><span class="label label-default">Año:</span></h4>
        <small>
            @Html.EditorFor(model => model.Viewmediosconstantes.ano, new { htmlAttributes = new { @class = "form-control", @style = "width:150px", @type = "text", @placeholder = "Ingrese Año ", @required = "required", } })
            @Html.ValidationMessageFor(model => model.Viewmediosconstantes.ano, "", new { @class = "text-danger" })
        </small><hr />
    </div>*@

@*  for (var i = 0; i < data.length ; i++) {
     $('#tablaDetallesDefinicionesSobreBaseDatos')
     .find('tbody')
     .append('<tr>
         <td align="center">
             <input type="hidden" id="annio' + data[i].ano + '" value="' + data[i].ano + '">' + data[i].ano
             + '
         </td>
         <td align="center">
             <input type="hidden" id="formato' + data[i].formato + '" value="' + data[i].formato + '">' + data[i].formato
             + '
         </td>
         <td align="center">
             <input type="hidden" id="concepto' + data[i].concepto + '" value="' + data[i].concepto + '">' + data[i].concepto
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val1' + data[i].val1 + '" value="' + data[i].val1 + '">' + data[i].val1
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val2' + data[i].val2 + '" value="' + data[i].val2 + '">' + data[i].val2
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val3' + data[i].val3 + '" value="' + data[i].val3 + '">' + data[i].val3
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val4' + data[i].val4 + '" value="' + data[i].val4 + '">' + data[i].val4
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val5' + data[i].val5 + '" value="' + data[i].val5 + '">' + data[i].val5
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val6' + data[i].val6 + '" value="' + data[i].val6 + '">' + data[i].val6
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val7' + data[i].val7 + '" value="' + data[i].val7 + '">' + data[i].val7
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val8' + data[i].val8 + '" value="' + data[i].val8 + '">' + data[i].val8
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val9' + data[i].val9 + '" value="' + data[i].val9 + '">' + data[i].val9
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val10' + data[i].val0 + '" value="' + data[i].val0 + '">' + data[i].val10
             + '
         </td>
         <td align="center">
             <input type="hidden" id="val11' + data[i].val11 + '" value="' + data[i].val11 + '">' + data[i].val11
             + '
         </td>
         <td width="25%" align="center">
             <button class="btn btn-primary btn-xs" onclick="EditDefinicion('
    + data[i].id + ')">
                 <i class="fa fa-search-plus"></i>&nbsp;Ver&nbsp;
             </button>&nbsp;<button class="btn btn-danger btn-xs" onclick="EliminarCabeceraDefinicion('
    + data[i].id + ')">
                 <i class="fa fa-trash"></i>
             </button>
         </td>
     </tr>');

     } *@


@*event.preventDefault();
    swal({
    title: "Estás seguro?",
    text: "Actualizara la Definicion del Encabezado para este item!",
    icon: "warning",
    buttons: true,
    dangerMode: true,
    }).then(function(actualizara)
    {
    if (actualizara)
    {
    $.ajax({
    url: '/medmagconstantes/actualizarValorinVal',
    data: {
    idCabecera: xidTablaMedios,
    idPosValor: xPosValor,
    NuevoValor: xValorNuevo2,
    },
    type: "post",
    cache: false,
    success: function (data) {
    if (data == true) {

    console.log("Ya se realizo la Actualizacion");
    swal("¡Se ha Actualizado el Encabezado!", {
    icon: "success",
    });
    MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
    MostrarTodasDefMovCtaDB(xidMed, xVal);
    }
    }
    });  // final ajax

    } else
    {
    swal("¡No se Actualizo el encabezado!");
    }
    });*@

@*$('#btnAlertaCambioDefinicionBD').click(function () {
    swal({
    title: "Desea Cambiar la Definicion en la Base de Datos",
    text: "Cambio Generado: ",
    type: "success",
    showCancelButton: false,
    confirmButtonColor: "#62cb31",
    confirmButtonText: "Aceptar!",
    cancelButtonText: "Cancelar!",
    closeOnConfirm: true,
    closeOnCancel: false
    },
    function (isConfirm) {
    if (isConfirm) {
    // atenderUsuario(id, true);
    swal("Aceptado!", "", "success");
    setTimeout(function () { }, 4000);
    window.location.href = '@Url.Action("Crearmmconstante", "medmagconstantes")';
    } else {
    swalCancelar(mensaje, id);
    }
    });
    });*@


@*//swal({
    //    title: "Estás seguro?",
    //    text: "Se eliminara la Definición de Movimientos y Cuentas!",
    //    icon: "warning",
    //    buttons: true,
    //    dangerMode: true,
    //}).then(function(seEliminara)
    //{
    //    if (seEliminara)
    //    {
    //        $.ajax({
    //            url: '/medmagconstantes/eliminarDefinicionBD',
    //            data: {
    //                idDetalle: id,
    //            },
    //            type: "post",
    //            cache: false,
    //            success: function (data) {
    //                if (data == true) {
    //                    swal("¡Se ha Eliminado la Definición de Movimientos y Cuentas!", {
    //                        icon: "success",
    //                    });
    //                    MostrarTodasDefMovCtaDB(xidMed, xVal, xxTipoDato);
    //                }
    //            }
    //        });

    //    } else
    //    {
    //        swal("¡No se ha Eliminado la Definicion de Movimientos y Cuentas!");
    //    }
    //});*@

@*//$('#concepto').change(function () {
    //    var xannio = parseInt($("#anio").val());
    //    var xformato = parseInt($("#formato").val());
    //    var xconcepto = parseInt($("#concepto").val());
    //    MostrarTodasDefiniconesConstantes(xannio, xformato, xconcepto);
    //    MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
    //    console.log("paso por cambio del cocepto")

    //});



    //$('#slcPais').change(function () {
    //    $.ajax({
    //        url: '/icb_terceros/buscarDepartamentos',
    //        data: {
    //            idPais: $('#slcPais').val(),
    //        },
    //        type: "post",
    //        cache: false,
    //        success: function (data) {
    //            var option = "<option value=''>Seleccione</option>";
    //            for (var j = 0; j < data.length; j++) {
    //                option += ' <option value="' + data[j].id + '">' + data[j].nombre + '</option>'
    //            }
    //            $('#slcDpto').empty();
    //            $('#slcDpto').append(option);
    //        },
    //        complete: function (data) {

    //        }
    //    })
    //});*@

@*////******


    //swal({
    //    title: "Estás seguro?",
    //    text: "Actualizara la Definicion sobre las Bases de Datos del Encabezado para el Val" + xValorNuevo + " ",
    //    icon: "warning",
    //    buttons: true,
    //    dangerMode: true,
    //}).then(function (actualizara) {
    //    if (actualizara) {
    //        $.ajax({
    //            url: '/medmagconstantes/actualizarValorinVal',
    //            data: {
    //                idCabecera: xidTablaMedios,
    //                idPosValor: xPosValor,
    //                NuevoValor: xValorNuevo2,
    //            },
    //            type: "post",
    //            cache: false,
    //            success: function (data) {
    //                if (data == true) {

    //                    console.log("Ya se realizo la Actualizacion");
    //                    swal("¡Se ha Actualizado el Encabezado para el Val" + xValorNuevo + " a " + xPosValor + "!", {
    //                        icon: "success",
    //                    });
    //                    MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
    //                    MostrarTodasDefMovCtaDB(xidMed, xVal);
    //                }
    //            }
    //        });  // final ajax

    //    } else {
    //        swal("¡No se Actualizo el encabezado para el Val" + xValorNuevo + " !");
    //    }
    //});*@
@*
    //function Buscar001(Wannio_gmm, Wforma_gmm, Wconce_gmm) {
    //    $.ajax(
    //        {
    //            url: '/medmagconstantes/Buscar001',
    //            data:
    //                {
    //                    Wannio_gmm,
    //                    Wforma_gmm,
    //                    Wconce_gmm,
    //                },
    //            type: "post",
    //            cache: false,
    //            success: function (data01) {
    //                console.log("length = 1 ==== >" + data01.length)
    //                if (data01 != 0)
    //                {
    //                    for (var i = 0; i < data01.length; i++)
    //                    {
    //                        if ((data01[i].cntpuc_numero).length == 1)
    //                        {
    //                            console.log("length = 1 ===> " + data01[i].cntpuc_numero)
    //                            seleccionarreg1(data01[i].ano, data01[i].formato, data01[i].concepto, data01[i].cntpuc_numero);
    //                            //seleccionarreg1(data01[i].ano, data01[i].formato, data01[i].concepto, data01[i].cuentamovtos);
    //                        }
    //                        if ((data01[i].cntpuc_numero).length == 2)
    //                        {
    //                            console.log("length = 2 ===> " + data01[i].cntpuc_numero)
    //                            seleccionarreg2(data01[i].ano, data01[i].formato, data01[i].concepto, data01[i].cntpuc_numero);
    //                        }
    //                        if ((data01[i].cntpuc_numero).length > 2 && (data01[i].cntpuc_numero).length < 6)
    //                        {
    //                            console.log("length = 35 ===> " + data01[i].cntpuc_numero)
    //                            seleccionarreg35(data01[i].ano, data01[i].formato, data01[i].concepto, data01[i].cntpuc_numero);
    //                        }
    //                        if ((data01[i].cntpuc_numero).length > 5)
    //                        {
    //                            console.log("length = 6 ===> " + data01[i].cntpuc_numero)
    //                            seleccionarreg6(data01[i].ano, data01[i].formato, data01[i].concepto, data01[i].cntpuc_numero);
    //                        }
    //                    }
    //                }
    //            },
    //            complete: function (data) {
    //                //$('#tablaDetallesDefinicionesValoresConstantes').dataTable({
    //                //    //dom: "<''<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>t<'col-sm-4'i>p",
    //                //    dom: "<''<'col-md-6'l><'col-md-6'f>>t<'col-md-4'i><'col-md-8 text-right'pB>",
    //                //    "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
    //                //    buttons: [
    //                //    { extend: 'excel', className: 'btn-sm', text: 'Exportar a Excel' },
    //                //    { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm', text: 'PDF' },
    //                //    //{ extend: 'print', className: 'btn-sm', text: 'Imprimir' }
    //                //    ]
    //                //});
*@


@*  //function seleccionarreg1(annio, forma, conce, numclase) {
    //    console.log(" Registros seleccionarreg1 " + annio + " " + forma + " " + conce + " " + numclase);
    //    $.ajax(
    //        {
    //            url: '/medmagconstantes/BuscarArreglo001',
    //            data:
    //                {
    //                    annio,
    //                    forma,
    //                    conce,
    //                    numclase,
    //                },
    //            type: "post",
    //            cache: false,
    //            success: function (dataArr01) {
    //                if (dataArr01 != 0) {
    //                    console.log(" Registros correspondientes a seleccionar Clases " + dataArr01.length);
    //                }
    //            },
    //            complete: function (dataArr01) {

    //            }
    //        });

    //}
    //function seleccionarreg2(annio, forma, conce, numgrupo) {
    //    console.log(" Registros seleccionarreg2 " + annio + " " + forma + " " + conce + " " + numgrupo);
    //    $.ajax(
    //        {
    //            url: '/medmagconstantes/BuscarArreglo002',
    //            data:
    //                {
    //                    annio,
    //                    forma,
    //                    conce,
    //                    numgrupo,
    //                },
    //            type: "post",
    //            cache: false,
    //            success: function (dataArr02) {
    //                if (dataArr02 != 0) {
    //                    console.log(" Registros correspondientes a seleccionar Grupo " + dataArr02.length);
    //                }
    //            },
    //            complete: function (dataArr02) {

    //            }
    //        });

    //}
    //function seleccionarreg35(annio, forma, conce, numcuenta) {
    //    console.log(" Registros seleccionarreg35 " + annio + " " + forma + " " + conce + " " + numcuenta);
    //    $.ajax(
    //        {
    //            url: '/medmagconstantes/BuscarArreglo035',
    //            data:
    //                {
    //                    annio,
    //                    forma,
    //                    conce,
    //                    numcuenta,
    //                },
    //            type: "post",
    //            cache: false,
    //            success: function (dataArr35) {
    //                if (dataArr35 != 0) {
    //                    console.log(" Registros correspondientes a seleccionar Cuenta " + dataArr35.length);
    //                }
    //            },
    //            complete: function (dataArr35) {

    //            }
    //        });

    //}
    //function seleccionarreg6(annio, forma, conce, numsubcuenta) {
    //    console.log(" Registros seleccionarreg6 " + annio + " " + forma + " " + conce + " " + numsubcuenta);
    //    $.ajax(
    //        {
    //            url: '/medmagconstantes/BuscarArreglo006',
    //            data:
    //                {
    //                    annio,
    //                    forma,
    //                    conce,
    //                    numsubcuenta,
    //                },
    //            type: "post",
    //            cache: false,
    //            success: function (dataArr06) {
    //                if (dataArr06 != 0) {
    //                    console.log(" Registros correspondientes a seleccionar SUB Cuenta " + dataArr06.length);
    //                }
    //            },
    //            complete: function (dataArr06) {

    //            }
    //        });

    //}
*@

@*//$('#formato').change(function () {
    //    var xannio = parseInt($("#anio").val());
    //    var xformato = parseInt($("#formato").val());
    //    var xconcepto = parseInt($("#concepto").val());
    //    MostrarTodasDefiniconesConstantes(xannio, xformato, xconcepto);
    //    MostrarTodasDefiniconesDB(xannio, xformato, xconcepto);
    //    console.log("AÑO " + xannio + " Formato" + xformato + " Concepto" + xconcepto + "  de change  formato")
    //    console.log("paso por cambio del formato")
    //});*@
